<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="generator" content="hevea 2.14">
<style type="text/css">
.li-itemize{margin:1ex 0ex;}
.li-enumerate{margin:1ex 0ex;}
.dd-description{margin:0ex 0ex 1ex 4ex;}
.dt-description{margin:0ex;}
.toc{list-style:none;}
.footnotetext{margin:0ex; padding:0ex;}
div.footnotetext P{margin:0px; text-indent:1em;}
.thefootnotes{text-align:left;margin:0ex;}
.dt-thefootnotes{margin:0em;}
.dd-thefootnotes{margin:0em 0em 0em 2em;}
.footnoterule{margin:1em auto 1em 0px;width:50\char045;}
.caption{padding-left:2ex; padding-right:2ex; margin-left:auto; margin-right:auto}
.title{margin:2ex auto;text-align:center}
.titlemain{margin:1ex 2ex 2ex 1ex;}
.titlerest{margin:0ex 2ex;}
.center{text-align:center;margin-left:auto;margin-right:auto;}
.flushleft{text-align:left;margin-left:0ex;margin-right:auto;}
.flushright{text-align:right;margin-left:auto;margin-right:0ex;}
div table{margin-left:inherit;margin-right:inherit;margin-bottom:2px;margin-top:2px}
td table{margin:auto;}
table{border-collapse:collapse;}
td{padding:0;}
.cellpadding0 tr td{padding:0;}
.cellpadding1 tr td{padding:1px;}
pre{text-align:left;margin-left:0ex;margin-right:auto;}
blockquote{margin-left:4ex;margin-right:4ex;text-align:left;}
td p{margin:0px;}
.boxed{border:1px solid black}
.textboxed{border:1px solid black}
.vbar{border:none;width:2px;background-color:black;}
.hbar{border:none;height:2px;width:100\char045;background-color:black;}
.hfill{border:none;height:1px;width:200\char045;background-color:black;}
.vdisplay{border-collapse:separate;border-spacing:2px;width:auto; empty-cells:show; border:2px solid red;}
.vdcell{white-space:nowrap;padding:0px; border:2px solid green;}
.display{border-collapse:separate;border-spacing:2px;width:auto; border:none;}
.dcell{white-space:nowrap;padding:0px; border:none;}
.dcenter{margin:0ex auto;}
.vdcenter{border:solid #FF8000 2px; margin:0ex auto;}
.minipage{text-align:left; margin-left:0em; margin-right:auto;}
.marginpar{border:solid thin black; width:20\char045; text-align:left;}
.marginparleft{float:left; margin-left:0ex; margin-right:1ex;}
.marginparright{float:right; margin-left:1ex; margin-right:0ex;}
.theorem{text-align:left;margin:1ex auto 1ex 0ex;}
.part{margin:2ex auto;text-align:center}
.lstlisting{font-family:monospace;white-space:pre;margin-right:auto;margin-left:0pt;text-align:left}
</style>
<title>gVirtualXRay -- Tutorial 01: Creating a Window and 
an OpenGL Context Using GLUT
</title>
</head>
<body >
<!--HEVEA command line is: hevea -fix tutorial-01-glut.tex -->
<!--CUT STYLE article--><!--CUT DEF section 1 --><table class="title"><tr><td style="padding:1ex"><h1 class="titlemain">gVirtualXRay &#X2013; Tutorial 01: Creating a Window and<br>
an OpenGL Context Using GLUT</h1><h3 class="titlerest">Dr Franck P. Vidal</h3><h3 class="titlerest">4<sup>th</sup> September 2014</h3></td></tr>
</table><div class="center">
<img src="tutorial-01-glut001.png">
</div><!--TOC section id="sec1" Contents-->
<h2 id="sec1" class="section">Contents</h2><!--SEC END --><ul class="toc"><li class="li-toc">
Table of contents
</li><li class="li-toc"><a href="#sec2">1&#XA0;&#XA0;Introduction</a>
</li><li class="li-toc"><a href="#sec3">2&#XA0;&#XA0;Header inclusion</a>
</li><li class="li-toc"><a href="#sec4">3&#XA0;&#XA0;Name Spaces</a>
</li><li class="li-toc"><a href="#sec5">4&#XA0;&#XA0;Global Variables</a>
</li><li class="li-toc"><a href="#sec6">5&#XA0;&#XA0;Function Declarations</a>
</li><li class="li-toc"><a href="#sec7">6&#XA0;&#XA0;Initialise GLUT</a>
</li><li class="li-toc"><a href="#sec8">7&#XA0;&#XA0;Initialise GLEW</a>
</li><li class="li-toc"><a href="#sec9">8&#XA0;&#XA0;Initialise OpenGL</a>
</li><li class="li-toc"><a href="#sec10">9&#XA0;&#XA0;Load 3D Objects</a>
</li><li class="li-toc"><a href="#sec11">10&#XA0;&#XA0;Display the 3D Scene</a>
</li><li class="li-toc"><a href="#sec12">11&#XA0;&#XA0;Idle Callback</a>
</li><li class="li-toc"><a href="#sec13">12&#XA0;&#XA0;Quit Callback</a>
</li><li class="li-toc"><a href="#sec14">13&#XA0;&#XA0;Frame Buffer Size Callback</a>
</li><li class="li-toc"><a href="#sec15">14&#XA0;&#XA0;Keyboard Callback</a>
</li><li class="li-toc"><a href="#sec16">15&#XA0;&#XA0;Scroll Button Callback</a>
</li><li class="li-toc"><a href="#sec17">16&#XA0;&#XA0;Next Tutorial...</a>
</li><li class="li-toc"><a href="#sec18">A&#XA0;&#XA0;Program Source Code</a>
</li></ul>
<!--TOC section id="sec2" Introduction-->
<h2 id="sec2" class="section">1&#XA0;&#XA0;Introduction</h2><!--SEC END --><p>The complete source code of this tutorial is available in 
Appendix&#XA0;<a href="#sec%3AProgram%20Source%20Code">A</a> and on the Subversion (SVN) repository 
at 
<code>example/tutorial_01_glut/tutorial_01_glut.cxx</code>. 
It can be downloaded here: 
<a href="
https://sourceforge.net/p/gvirtualxray/code/HEAD/tree/trunk/tutorials/tutorial_01_glut/tutorial_01_glut.cxx"><span style="font-family:monospace">
https://sourceforge.net/p/gvirtualxray/code/HEAD/tree/trunk/tutorials/tutorial_01_glut/tutorial_01_glut.cxx</span></a>. 
It shows how to create a window with GLUT&#XA0;<sup><a id="text1" href="#note1">1</a></sup> 
and attach an OpenGL context to it. 
Two cubes are displayed (see Figure&#XA0;<a href="#fig%3Ascene">1</a>). 
</p><blockquote class="figure"><div class="center"><div class="center"><hr style="width:80%;height:2"></div>
<img src="tutorial-01-glut002.png">
<div class="caption"><table style="border-spacing:6px;border-collapse:separate;" class="cellpading0"><tr><td style="vertical-align:top;text-align:left;" >Figure 1: <a id="fig:scene"></a> Screen capture of the tutorial.</td></tr>
</table></div>
<div class="center"><hr style="width:80%;height:2"></div></div></blockquote><p>
They both rotate automatically. 
The rendering makes use of OpenGL Shading Language (GLSL) as the fix rendering 
pipeline and direct 
rendering are both depreciated in any modern computer graphics applications. </p><p>It is an introductory tutorial, for more details, the reader may refer to the 
code (it is well documented) and the 
Doxygen&#XA0;<sup><a id="text2" href="#note2">2</a></sup> documentation of the 
project&#XA0;<sup><a id="text3" href="#note3">3</a></sup>
. </p><p>The tutorial is organised as follows:
</p><ul class="itemize"><li class="li-itemize">
Section&#XA0;<a href="#sec%3AHeader%20inclusion">2</a> shows the header files to include. </li><li class="li-itemize">Section&#XA0;<a href="#sec%3AName%20Spaces">3</a> shows some of the name spaces that can be 
	included to lighten the code. 
	</li><li class="li-itemize">Section&#XA0;<a href="#sec%3AGlobal%20Variables">4</a> shows the global variables that are 
	used. </li><li class="li-itemize">Section&#XA0;<a href="#sec%3AFunction%20Declarations">5</a> what typical functions have to 
	be declared in a basic GLUT program. </li><li class="li-itemize">Section&#XA0;<a href="#sec%3AInitialise%20GLUT">6</a> shows how to initialise GLUT. </li><li class="li-itemize">Section&#XA0;<a href="#sec%3AInitialise%20GLEW">7</a> shows how to initialise 
GLEW&#XA0;<sup><a id="text4" href="#note4">4</a></sup>. </li><li class="li-itemize">Section&#XA0;<a href="#sec%3AInitialise%20OpenGL">8</a> shows how to initialise OpenGL. </li><li class="li-itemize">How to load 3D objects is explained in Section&#XA0;<a href="#sec%3ALoad%20Objects">9</a> </li><li class="li-itemize">They are displayed in Section&#XA0;<a href="#sec%3ADisplay%20Scene">10</a>.</li><li class="li-itemize">Section&#XA0;<a href="#sec%3AIdle%20Callback">11</a> shows the idle callback. </li><li class="li-itemize">Section&#XA0;<a href="#sec%3AQuit%20Callback">12</a> shows the routine that is called when 
the program shuts.</li><li class="li-itemize">Section&#XA0;<a href="#sec%3Aframe%20buffer%20callback">13</a> shows what is done when the sze 
of the frame buffer changes, i.e.&#XA0;when the window is resized.</li><li class="li-itemize">Section&#XA0;<a href="#sec%3AKeyboard%20Callback">14</a> shows how to handle the keyboard.</li><li class="li-itemize">Section&#XA0;<a href="#sec%3AScroll%20button%20callback">15</a> shows how to handle the 
scroll button.</li><li class="li-itemize">Section&#XA0;<a href="#sec%3ANext%20Tutorial">16</a> gives a preview of what the next 
tutorial will be about.</li><li class="li-itemize">Appendix&#XA0;<a href="#sec%3AProgram%20Source%20Code">A</a> shows the source code of this 
	tutorial. 
	
</li></ul>
<!--TOC section id="sec3" Header inclusion-->
<h2 id="sec3" class="section">2&#XA0;&#XA0;Header inclusion</h2><!--SEC END --><p>
<a id="sec:Header inclusion"></a></p><p>Listing&#XA0;<a href="#lst%3Aheader">1</a> shows 
the header files that need to be included to 
build a simple program based on the GLUT 
library:
</p><ul class="itemize"><li class="li-itemize">
<code>GL/glew.h</code> is the GLEW header file. It can be found at 
<a href="http://glew.sourceforge.net/"><span style="font-family:monospace">http://glew.sourceforge.net/</span></a>. GLEW is used to ensure that there is no 
undefined references when the Windows executable is created.
</li><li class="li-itemize"><code>glut.h</code> is the GLUT header file. Be careful here as Apple installed it somewhere else... 
</li><li class="li-itemize"><code>iostream</code> is used for output streams.
</li><li class="li-itemize"><code>sstream</code> is used to generate error messages
</li><li class="li-itemize"><code>exception</code> is used for C++ exceptions.
</li><li class="li-itemize"><code>cstdlib</code> defines return status (<code>EXIT_SUCCESS</code> and 
	<code>EXIT_FAILURE</code>).
</li><li class="li-itemize"><code>gVirtualXRay/Types.h</code> defines new types, e.g 
<code>RATIONAL_NUMBER</code>, 
	<code>VEC2</code>, <code>VEC3</code> and <code>MATRIX4</code> to name a few.
</li><li class="li-itemize"><code>gVirtualXRay/Units.h</code> defines units such as metre, kilometre, 
electronvolt, 
	kiloelectron volt, gram, kilogram, etc.
</li><li class="li-itemize"><code>gVirtualXRay/OpenGLUtilities.h</code> defines some utility functions 
about OpenGL, 
	e.g. matrix stacks, how to set the projection matrix, etc.
</li><li class="li-itemize"><code>gVirtualXRay/PolygonMesh.h</code> corresponds to a class used to handle 
three-dimensional (3D) triangle meshes.
</li><li class="li-itemize"><code>gVirtualXRay/Shader.h</code> corresponds to a class that handles 
(GLSL) programs.
</li><li class="li-itemize"><code>buildCube.h</code> is used to create the triangle mesh of a cube.
</li></ul><div class="center">

<div class="center">Listing&#XA0;1: <a id="lst:header"></a>Header inclusion.</div><br>
<table class="lstframe" style="padding:1ex;background-color:white;border-style:solid;border-color:black;"><tr><td class="lstlisting"><span style="font-size:xx-small"><span style="color:#7F7F7F">  62</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">//******************************************************************************</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F">  63</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">//  Include</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F">  64</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">//******************************************************************************</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F">  65</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:blue">#include</span></span><span style="font-size:small"> &lt;</span><span style="font-size:small">GL</span><span style="font-size:small">/</span><span style="font-size:small">glew</span><span style="font-size:small">.</span><span style="font-size:small">h</span><span style="font-size:small">&gt;  </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Handle shaders</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F">  66</span></span><span style="font-size:small"> </span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F">  67</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Create an OpenGL context and attach a window to it</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F">  68</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:blue">#ifdef</span></span><span style="font-size:small"> </span><span style="font-size:small">__APPLE__</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F">  69</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:blue">#include</span></span><span style="font-size:small"> &lt;</span><span style="font-size:small">GLUT</span><span style="font-size:small">/</span><span style="font-size:small">glut</span><span style="font-size:small">.</span><span style="font-size:small">h</span><span style="font-size:small">&gt;</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F">  70</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:blue">#else</span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F">  71</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:blue">#include</span></span><span style="font-size:small"> &lt;</span><span style="font-size:small">GL</span><span style="font-size:small">/</span><span style="font-size:small">glut</span><span style="font-size:small">.</span><span style="font-size:small">h</span><span style="font-size:small">&gt;</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F">  72</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:blue">#endif</span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F">  73</span></span><span style="font-size:small"> </span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F">  74</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:blue">#include</span></span><span style="font-size:small"> &lt;</span><span style="font-size:small">iostream</span><span style="font-size:small">&gt;   </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Print error messages in the console</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F">  75</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:blue">#include</span></span><span style="font-size:small"> &lt;</span><span style="font-size:small">sstream</span><span style="font-size:small">&gt;    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Generate error messages</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F">  76</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:blue">#include</span></span><span style="font-size:small"> &lt;</span><span style="font-size:small">exception</span><span style="font-size:small">&gt;  </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Catch C++ exception</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F">  77</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:blue">#include</span></span><span style="font-size:small"> &lt;</span><span style="font-size:small">cstdlib</span><span style="font-size:small">&gt;    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Define return status (EXIT_SUCCESS and EXIT_FAILURE)</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F">  78</span></span><span style="font-size:small"> </span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F">  79</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Define new types, e.g.~RATIONAL_NUMBER, VEC2, VEC3 and MATRIX4 to name a few</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F">  80</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:blue">#include</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:#9300D1"><span style="font-size:small">"gVirtualXRay/Types.h"</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F">  81</span></span><span style="font-size:small"> </span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F">  82</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Define units such as metre, kilometre, electronvolt, gram, kilogram, etc.</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F">  83</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:blue">#include</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:#9300D1"><span style="font-size:small">"gVirtualXRay/Units.h"</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F">  84</span></span><span style="font-size:small"> </span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F">  85</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Some utility functions about OpenGL, e.g. matrix stacks,</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F">  86</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// how to set the projection matrix, etc.</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F">  87</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:blue">#include</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:#9300D1"><span style="font-size:small">"gVirtualXRay/OpenGLUtilities.h"</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F">  88</span></span><span style="font-size:small"> </span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F">  89</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:blue">#include</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:#9300D1"><span style="font-size:small">"gVirtualXRay/PolygonMesh.h"</span></span></span><span style="font-size:small">  </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Handle 3D triangle meshes</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F">  90</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:blue">#include</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:#9300D1"><span style="font-size:small">"gVirtualXRay/Shader.h"</span></span></span><span style="font-size:small">       </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Handle GLSL programs</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F">  91</span></span><span style="font-size:small"> </span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F">  92</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:blue">#include</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:#9300D1"><span style="font-size:small">"buildCube.h"</span></span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Create the triangle mesh of a cube</span></span></span></td></tr>
</table>
</div>
<!--TOC section id="sec4" Name Spaces-->
<h2 id="sec4" class="section">3&#XA0;&#XA0;Name Spaces</h2><!--SEC END --><p>
<a id="sec:Name Spaces"></a></p><p>Listing&#XA0;<a href="#lst%3Aname%20space">2</a> shows the name spaces that can be selected:
</p><ul class="itemize"><li class="li-itemize">
<code>gVirtualXRay</code> includes graphics elements such as <code>PolygonMesh</code> 
	and utilities such as <code>Exception</code>. 
</li><li class="li-itemize"><code>std</code> is used for output streams and exceptions.
</li></ul><div class="center">

<div class="center">Listing&#XA0;2: <a id="lst:name space"></a>Name spaces.</div><br>
<table class="lstframe" style="padding:1ex;background-color:white;border-style:solid;border-color:black;"><tr><td class="lstlisting"><span style="font-size:xx-small"><span style="color:#7F7F7F">  95</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">//******************************************************************************</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F">  96</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">//  Name space</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F">  97</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">//******************************************************************************</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F">  98</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:blue">using</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:blue">namespace</span></span><span style="font-size:small"> </span><span style="font-size:small">gVirtualXRay</span><span style="font-size:small">;</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F">  99</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:blue">using</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:blue">namespace</span></span><span style="font-size:small"> </span><span style="font-size:small">std</span><span style="font-size:small">;</span></td></tr>
</table>
</div>
<!--TOC section id="sec5" Global Variables-->
<h2 id="sec5" class="section">4&#XA0;&#XA0;Global Variables</h2><!--SEC END --><p>
<a id="sec:Global Variables"></a></p><p>Listing&#XA0;<a href="#lst%3Aglobal%20variables">3</a> shows the global variables that are used:
</p><ul class="itemize"><li class="li-itemize">
	<code>GLsizei g_window_width</code> keeps track of the window width.<p>	</p></li><li class="li-itemize"><code>GLsizei g_window_height</code> keeps track of the window height.
	
	</li><li class="li-itemize"><code>int g_window_id</code> is the GLUT window ID.
	
	</li><li class="li-itemize"><code>Shader g_display_shader</code> is the shader program used to 
		display the 3D scene
	
	</li><li class="li-itemize"><code>PolygonMesh g_polygon_mesh_1</code> is the polygon mesh of the first 
		3D object.
	
	</li><li class="li-itemize"><code>PolygonMesh g_polygon_mesh_2</code> is the polygon mesh of the second 
		3D object.<p>	</p></li><li class="li-itemize"><code>MATRIX4 g_object_1_rotation_matrix</code> corresponds to the 
		transformation matrix of the first 3D object.
	
	</li><li class="li-itemize"><code>MATRIX4 g_object_2_rotation_matrix</code>corresponds to the 
		transformation matrix of the second 3D object.<p>	</p></li><li class="li-itemize"><code>vector&lt;double&gt; g_p_vertex_set_1</code> is an array containing 
		the vertices of the first 3D object.
		
	</li><li class="li-itemize"><code>vector&lt;unsigned char&gt; g_p_index_set_1</code> is an array 
		containing vertex indices to build triangles from 
		<code>g_p_vertex_set_1</code>.<p>	</p></li><li class="li-itemize"><code>vector&lt;float&gt; g_p_vertex_set_2</code> is an array containing 
		the vertices of the second 3D object. Note that no index is used in 
		this case.<p>	</p></li><li class="li-itemize"><code>RATIONAL_NUMBER g_zoom</code> controls the zoom.<p>	</p></li><li class="li-itemize"><code>const GLchar* g_vertex_shader</code> is the source code of the vertex 
		shader.<p>	</p></li><li class="li-itemize"><code>const GLchar* g_fragment_shader</code> is the source code of the 
		fragment shader.
</li></ul><div class="center">

<div class="center">Listing&#XA0;3: <a id="lst:global variables"></a>Global variables.</div><br>
<table class="lstframe" style="padding:1ex;background-color:white;border-style:solid;border-color:black;"><tr><td class="lstlisting"><span style="font-size:xx-small"><span style="color:#7F7F7F"> 102</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">//******************************************************************************</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 103</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">//  Global variables</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 104</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">//******************************************************************************</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 105</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Keep track of the window width</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 106</span></span><span style="font-size:small"> </span><span style="font-size:small">GLsizei</span><span style="font-size:small"> </span><span style="font-size:small">g_window_width</span><span style="font-size:small">(640);</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 107</span></span><span style="font-size:small"> </span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 108</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Keep track of the window height</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 109</span></span><span style="font-size:small"> </span><span style="font-size:small">GLsizei</span><span style="font-size:small"> </span><span style="font-size:small">g_window_height</span><span style="font-size:small">(480);</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 110</span></span><span style="font-size:small"> </span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 111</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// GLUT window ID</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 112</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:blue">int</span></span><span style="font-size:small"> </span><span style="font-size:small">g_window_id</span><span style="font-size:small">(0);</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 113</span></span><span style="font-size:small"> </span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 114</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Shader program used to display the 3D scene</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 115</span></span><span style="font-size:small"> </span><span style="font-size:small">Shader</span><span style="font-size:small"> </span><span style="font-size:small">g_display_shader</span><span style="font-size:small">;</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 116</span></span><span style="font-size:small"> </span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 117</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// 3D objects as VAOs and VBOs</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 118</span></span><span style="font-size:small"> </span><span style="font-size:small">PolygonMesh</span><span style="font-size:small"> </span><span style="font-size:small">g_polygon_mesh_1</span><span style="font-size:small">;</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 119</span></span><span style="font-size:small"> </span><span style="font-size:small">PolygonMesh</span><span style="font-size:small"> </span><span style="font-size:small">g_polygon_mesh_2</span><span style="font-size:small">;</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 120</span></span><span style="font-size:small"> </span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 121</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Transformation matrices</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 122</span></span><span style="font-size:small"> </span><span style="font-size:small">MATRIX4</span><span style="font-size:small"> </span><span style="font-size:small">g_object_1_rotation_matrix</span><span style="font-size:small">;</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 123</span></span><span style="font-size:small"> </span><span style="font-size:small">MATRIX4</span><span style="font-size:small"> </span><span style="font-size:small">g_object_2_rotation_matrix</span><span style="font-size:small">;</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 124</span></span><span style="font-size:small"> </span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 125</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Geometric data</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 126</span></span><span style="font-size:small"> </span><span style="font-size:small">vector</span><span style="font-size:small">&lt;</span><span style="font-size:small"><span style="color:blue">double</span></span><span style="font-size:small">&gt; </span><span style="font-size:small">g_p_vertex_set_1</span><span style="font-size:small">;</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 127</span></span><span style="font-size:small"> </span><span style="font-size:small">vector</span><span style="font-size:small">&lt;</span><span style="font-size:small"><span style="color:blue">unsigned</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:blue">char</span></span><span style="font-size:small">&gt; </span><span style="font-size:small">g_p_index_set_1</span><span style="font-size:small">;</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 128</span></span><span style="font-size:small"> </span><span style="font-size:small">vector</span><span style="font-size:small">&lt;</span><span style="font-size:small"><span style="color:blue">float</span></span><span style="font-size:small">&gt; </span><span style="font-size:small">g_p_vertex_set_2</span><span style="font-size:small">;</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 129</span></span><span style="font-size:small"> </span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 130</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Control the zoom</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 131</span></span><span style="font-size:small"> </span><span style="font-size:small">RATIONAL_NUMBER</span><span style="font-size:small"> </span><span style="font-size:small">g_zoom</span><span style="font-size:small">(50.0 * </span><span style="font-size:small">cm</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 132</span></span><span style="font-size:small"> </span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 133</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Vertex shader</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 134</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:blue">const</span></span><span style="font-size:small"> </span><span style="font-size:small">GLchar</span><span style="font-size:small">* </span><span style="font-size:small">g_vertex_shader</span><span style="font-size:small"> = </span><span style="font-size:small"><span style="color:#9300D1"><span style="font-size:small">"\</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 135</span></span><span style="font-size:small"> </span><span style="font-size:small">\n#version 110\n \</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 136</span></span><span style="font-size:small"> </span><span style="font-size:small">\n \</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 137</span></span><span style="font-size:small"> </span><span style="font-size:small">uniform mat4 g_projection_matrix;\n \</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 138</span></span><span style="font-size:small"> </span><span style="font-size:small">uniform mat4 g_modelview_matrix;\n \</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 139</span></span><span style="font-size:small"> </span><span style="font-size:small">\n \</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 140</span></span><span style="font-size:small"> </span><span style="font-size:small">void main(void)\n \</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 141</span></span><span style="font-size:small"> </span><span style="font-size:small">{\n \</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 142</span></span><span style="font-size:small"> </span><span style="font-size:small">    gl_Position = g_projection_matrix * g_modelview_matrix * vec4(gl_Vertex.xyz, 1.0);\n \</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 143</span></span><span style="font-size:small"> </span><span style="font-size:small">}\n \</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 144</span></span><span style="font-size:small"> </span><span style="font-size:small">"</span></span></span><span style="font-size:small">;</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 145</span></span><span style="font-size:small"> </span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 146</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Fragment shader</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 147</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:blue">const</span></span><span style="font-size:small"> </span><span style="font-size:small">GLchar</span><span style="font-size:small">* </span><span style="font-size:small">g_fragment_shader</span><span style="font-size:small"> = </span><span style="font-size:small"><span style="color:#9300D1"><span style="font-size:small">"\</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 148</span></span><span style="font-size:small"> </span><span style="font-size:small">\n#version 110\n \</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 149</span></span><span style="font-size:small"> </span><span style="font-size:small">\n \</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 150</span></span><span style="font-size:small"> </span><span style="font-size:small">void main(void)\n \</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 151</span></span><span style="font-size:small"> </span><span style="font-size:small">{\n \</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 152</span></span><span style="font-size:small"> </span><span style="font-size:small">    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);\n \</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 153</span></span><span style="font-size:small"> </span><span style="font-size:small">}\n \</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 154</span></span><span style="font-size:small"> </span><span style="font-size:small">"</span></span></span><span style="font-size:small">;</span></td></tr>
</table>
</div>
<!--TOC section id="sec6" Function Declarations-->
<h2 id="sec6" class="section">5&#XA0;&#XA0;Function Declarations</h2><!--SEC END --><p>
<a id="sec:Function Declarations"></a></p><p>Listing&#XA0;<a href="#lst%3Afunction%20declarations">4</a> shows the typical functions 
that have to be declared in a basic GLUT program:
</p><ul class="itemize"><li class="li-itemize">
<code>initGLUT</code> is used i) to initialise GLUT, ii) to create an OpenGL 
	context, iii) to create a window, and iv) attach the OpenGL context to the 
	window (see Section&#XA0;<a href="#sec%3AInitialise%20GLUT">6</a>).
</li><li class="li-itemize"><code>initGLEW</code> is used to initialise GLEW (see 
	Section&#XA0;<a href="#sec%3AInitialise%20GLEW">7</a>).
</li><li class="li-itemize"><code>initGL</code> is used to initialise some states of OpenGL, e.g. the 
	background colour and enable the Z-buffer (see 
	Section&#XA0;<a href="#sec%3AInitialise%20OpenGL">8</a>).
</li><li class="li-itemize"><code>load3DObjects</code> loads the 3D geometry of two cubes (see 
	Section&#XA0;<a href="#sec%3ALoad%20Objects">9</a>).
</li><li class="li-itemize"><code>displayCallback</code> render the two cubes on the screen (see 
	Section&#XA0;<a href="#sec%3ADisplay%20Scene">10</a>).
</li><li class="li-itemize"><code>idleCallback</code> is an idle callback 
	(see Section&#XA0;<a href="#sec%3AIdle%20Callback">11</a>). It is called once every event 
	loop and can be used to perform animation.
</li><li class="li-itemize"><code>quitCallback</code> is call when the program terminates (see 
	Section&#XA0;<a href="#sec%3AQuit%20Callback">12</a>). It closes the window and cleans up 
	GLUT.
</li><li class="li-itemize"><code>framebufferSizeCallback</code> is called every time the frame buffer 
	size changes (see Section&#XA0;<a href="#sec%3Aframe%20buffer%20callback">13</a>). It initialises 
	the viewport size and the projection matrix.
</li><li class="li-itemize"><code>keyCallback</code> is called every time a key is pressed or released on 
	the keyboard (see Section&#XA0;<a href="#sec%3AKeyboard%20Callback">14</a>). It can be used to 
	close the window when the <code>escape</code> key is pressed.
</li><li class="li-itemize"><code>scrollCallback</code> processes the mouse scroll button. It can be used 
	to zoom in and out (see Section&#XA0;<a href="#sec%3AScroll%20button%20callback">15</a>).
</li></ul><div class="center">

<div class="center">Listing&#XA0;4: <a id="lst:function declarations"></a>Function declarations.</div><br>
<table class="lstframe" style="padding:1ex;background-color:white;border-style:solid;border-color:black;"><tr><td class="lstlisting"><span style="font-size:xx-small"><span style="color:#7F7F7F"> 157</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">//******************************************************************************</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 158</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">//  Function declaration</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 159</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">//******************************************************************************</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 160</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:blue">void</span></span><span style="font-size:small"> </span><span style="font-size:small">initGLUT</span><span style="font-size:small">(</span><span style="font-size:small"><span style="color:blue">int</span></span><span style="font-size:small"> </span><span style="font-size:small">argc</span><span style="font-size:small">, </span><span style="font-size:small"><span style="color:blue">char</span></span><span style="font-size:small">** </span><span style="font-size:small">argv</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 161</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:blue">void</span></span><span style="font-size:small"> </span><span style="font-size:small">initGLEW</span><span style="font-size:small">();</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 162</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:blue">void</span></span><span style="font-size:small"> </span><span style="font-size:small">initGL</span><span style="font-size:small">();</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 163</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:blue">void</span></span><span style="font-size:small"> </span><span style="font-size:small">load3DObjects</span><span style="font-size:small">();</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 164</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:blue">void</span></span><span style="font-size:small"> </span><span style="font-size:small">displayCallback</span><span style="font-size:small">();</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 165</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:blue">void</span></span><span style="font-size:small"> </span><span style="font-size:small">idleCallback</span><span style="font-size:small">();</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 166</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:blue">void</span></span><span style="font-size:small"> </span><span style="font-size:small">quitCallback</span><span style="font-size:small">();</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 167</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:blue">void</span></span><span style="font-size:small"> </span><span style="font-size:small">framebufferSizeCallback</span><span style="font-size:small">(</span><span style="font-size:small"><span style="color:blue">int</span></span><span style="font-size:small"> </span><span style="font-size:small">aWidth</span><span style="font-size:small">, </span><span style="font-size:small"><span style="color:blue">int</span></span><span style="font-size:small"> </span><span style="font-size:small">aHeight</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 168</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:blue">void</span></span><span style="font-size:small"> </span><span style="font-size:small">keyCallback</span><span style="font-size:small">(</span><span style="font-size:small"><span style="color:blue">unsigned</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:blue">char</span></span><span style="font-size:small"> </span><span style="font-size:small">aKey</span><span style="font-size:small">, </span><span style="font-size:small"><span style="color:blue">int</span></span><span style="font-size:small"> </span><span style="font-size:small">aXPosition</span><span style="font-size:small">, </span><span style="font-size:small"><span style="color:blue">int</span></span><span style="font-size:small"> </span><span style="font-size:small">aYPosition</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 169</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:blue">void</span></span><span style="font-size:small"> </span><span style="font-size:small">scrollCallback</span><span style="font-size:small">(</span><span style="font-size:small"><span style="color:blue">int</span></span><span style="font-size:small"> </span><span style="font-size:small">aButton</span><span style="font-size:small">, </span><span style="font-size:small"><span style="color:blue">int</span></span><span style="font-size:small"> </span><span style="font-size:small">aState</span><span style="font-size:small">, </span><span style="font-size:small"><span style="color:blue">int</span></span><span style="font-size:small"> </span><span style="font-size:small">aXPosition</span><span style="font-size:small">, </span><span style="font-size:small"><span style="color:blue">int</span></span><span style="font-size:small"> </span><span style="font-size:small">aYPosition</span><span style="font-size:small">);</span></td></tr>
</table>
</div>
<!--TOC section id="sec7" Initialise GLUT-->
<h2 id="sec7" class="section">6&#XA0;&#XA0;Initialise GLUT</h2><!--SEC END --><p>
<a id="sec:Initialise GLUT"></a></p><p>Listing&#XA0;<a href="#lst%3AInitialise%20GLUT">5</a> shows how to initialise GLUT to create an 
OpenGL core profile 3.2 context and how to attach a window to it. There are 
nime main steps:
</p><ul class="itemize"><li class="li-itemize">
Initialise the GLUT library.
</li><li class="li-itemize">Create a windowed mode window and its OpenGL context
</li><li class="li-itemize">If the window has not been created, an exception is thrown.
</li><li class="li-itemize">Register GLUT callbacks
</li></ul><div class="center">

<div class="center">Listing&#XA0;5: <a id="lst:Initialise GLUT"></a>Initialise GLUT.</div><br>
<table class="lstframe" style="padding:1ex;background-color:white;border-style:solid;border-color:black;"><tr><td class="lstlisting"><span style="font-size:xx-small"><span style="color:#7F7F7F"> 223</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">//----------------------------------</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 224</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:blue">void</span></span><span style="font-size:small"> </span><span style="font-size:small">initGLUT</span><span style="font-size:small">(</span><span style="font-size:small"><span style="color:blue">int</span></span><span style="font-size:small"> </span><span style="font-size:small">argc</span><span style="font-size:small">, </span><span style="font-size:small"><span style="color:blue">char</span></span><span style="font-size:small">** </span><span style="font-size:small">argv</span><span style="font-size:small">)</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 225</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">//----------------------------------</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 226</span></span><span style="font-size:small"> </span><span style="font-size:small">{</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 227</span></span><span style="font-size:small"> </span><span style="font-size:small">  </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// GLUT initialisation</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 228</span></span><span style="font-size:small"> </span><span style="font-size:small">  </span><span style="font-size:small">glutInit</span><span style="font-size:small"> (&amp;</span><span style="font-size:small">argc</span><span style="font-size:small">, </span><span style="font-size:small">argv</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 229</span></span><span style="font-size:small"> </span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 230</span></span><span style="font-size:small"> </span><span style="font-size:small">  </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Create a windowed mode window and its OpenGL context</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 231</span></span><span style="font-size:small"> </span><span style="font-size:small">  </span><span style="font-size:small">glutInitWindowSize</span><span style="font-size:small">(</span><span style="font-size:small">g_window_width</span><span style="font-size:small">, </span><span style="font-size:small">g_window_height</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 232</span></span><span style="font-size:small"> </span><span style="font-size:small">  </span><span style="font-size:small">glutInitDisplayMode</span><span style="font-size:small"> ( </span><span style="font-size:small">GLUT_RGB</span><span style="font-size:small"> | </span><span style="font-size:small">GLUT_DOUBLE</span><span style="font-size:small"> | </span><span style="font-size:small">GLUT_DEPTH</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 233</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small">g_window_id</span><span style="font-size:small"> = </span><span style="font-size:small">glutCreateWindow</span><span style="font-size:small">(</span><span style="font-size:small"><span style="color:#9300D1"><span style="font-size:small">"gVirtualXRay -- Tutorial 01"</span></span></span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 234</span></span><span style="font-size:small"> </span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 235</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// The window has not been created</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 236</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:blue">if</span></span><span style="font-size:small"> (!</span><span style="font-size:small">g_window_id</span><span style="font-size:small">)</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 237</span></span><span style="font-size:small"> </span><span style="font-size:small">    {</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 238</span></span><span style="font-size:small"> </span><span style="font-size:small">        </span><span style="font-size:small"><span style="color:blue">throw</span></span><span style="font-size:small"> </span><span style="font-size:small">Exception</span><span style="font-size:small">(</span><span style="font-size:small">__FILE__</span><span style="font-size:small">, </span><span style="font-size:small">__FUNCTION__</span><span style="font-size:small">, </span><span style="font-size:small">__LINE__</span><span style="font-size:small">,</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 239</span></span><span style="font-size:small"> </span><span style="font-size:small">                </span><span style="font-size:small"><span style="color:#9300D1"><span style="font-size:small">"ERROR: cannot create a GLUT windowed mode window and its OpenGL context."</span></span></span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 240</span></span><span style="font-size:small"> </span><span style="font-size:small">    }</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 241</span></span><span style="font-size:small"> </span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 242</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Register GLUT callbacks</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 243</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small">glutDisplayFunc</span><span style="font-size:small">(</span><span style="font-size:small">displayCallback</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 244</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small">glutReshapeFunc</span><span style="font-size:small">(</span><span style="font-size:small">framebufferSizeCallback</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 245</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small">glutKeyboardFunc</span><span style="font-size:small">(</span><span style="font-size:small">keyCallback</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 246</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small">glutMouseFunc</span><span style="font-size:small">(</span><span style="font-size:small">scrollCallback</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 247</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small">glutIdleFunc</span><span style="font-size:small">(</span><span style="font-size:small">idleCallback</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 248</span></span><span style="font-size:small"> </span><span style="font-size:small">}</span></td></tr>
</table>
</div>
<!--TOC section id="sec8" Initialise GLEW-->
<h2 id="sec8" class="section">7&#XA0;&#XA0;Initialise GLEW</h2><!--SEC END --><p>
<a id="sec:Initialise GLEW"></a></p><p>Listing&#XA0;<a href="#lst%3AInitialise%20GLEW">6</a> shows how to initialise GLEW.</p><div class="center">

<div class="center">Listing&#XA0;6: <a id="lst:Initialise GLEW"></a>Initialise GLEW.</div><br>
<table class="lstframe" style="padding:1ex;background-color:white;border-style:solid;border-color:black;"><tr><td class="lstlisting"><span style="font-size:xx-small"><span style="color:#7F7F7F"> 251</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">//-------------</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 252</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:blue">void</span></span><span style="font-size:small"> </span><span style="font-size:small">initGLEW</span><span style="font-size:small">()</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 253</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">//-------------</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 254</span></span><span style="font-size:small"> </span><span style="font-size:small">{</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 255</span></span><span style="font-size:small"> </span><span style="font-size:small">  </span><span style="font-size:small">GLenum</span><span style="font-size:small"> </span><span style="font-size:small">err</span><span style="font-size:small"> = </span><span style="font-size:small">glewInit</span><span style="font-size:small">();</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 256</span></span><span style="font-size:small"> </span><span style="font-size:small">  </span><span style="font-size:small"><span style="color:blue">if</span></span><span style="font-size:small"> (</span><span style="font-size:small">GLEW_OK</span><span style="font-size:small"> != </span><span style="font-size:small">err</span><span style="font-size:small">)</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 257</span></span><span style="font-size:small"> </span><span style="font-size:small">  {</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 258</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small">std</span><span style="font-size:small">::</span><span style="font-size:small">stringstream</span><span style="font-size:small"> </span><span style="font-size:small">error_message</span><span style="font-size:small">;</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 259</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small">error_message</span><span style="font-size:small"> &lt;&lt; </span><span style="font-size:small"><span style="color:#9300D1"><span style="font-size:small">"ERROR: cannot initialise GLEW:\t"</span></span></span><span style="font-size:small"> &lt;&lt; </span><span style="font-size:small">glewGetErrorString</span><span style="font-size:small">(</span><span style="font-size:small">err</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 260</span></span><span style="font-size:small"> </span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 261</span></span><span style="font-size:small"> </span><span style="font-size:small">        </span><span style="font-size:small"><span style="color:blue">throw</span></span><span style="font-size:small"> </span><span style="font-size:small">Exception</span><span style="font-size:small">(</span><span style="font-size:small">__FILE__</span><span style="font-size:small">, </span><span style="font-size:small">__FUNCTION__</span><span style="font-size:small">, </span><span style="font-size:small">__LINE__</span><span style="font-size:small">, </span><span style="font-size:small">error_message</span><span style="font-size:small">.</span><span style="font-size:small">str</span><span style="font-size:small">());</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 262</span></span><span style="font-size:small"> </span><span style="font-size:small">  }</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 263</span></span><span style="font-size:small"> </span><span style="font-size:small">}</span></td></tr>
</table>
</div>
<!--TOC section id="sec9" Initialise OpenGL-->
<h2 id="sec9" class="section">8&#XA0;&#XA0;Initialise OpenGL</h2><!--SEC END --><p>
<a id="sec:Initialise OpenGL"></a></p><p>Listing&#XA0;<a href="#lst%3AInitialise%20OpenGL">7</a> shows how to initialise some OpenGL states 
(Z-buffer, and background colour) and check OpenGL&#X2019;s error status. </p><div class="center">

<div class="center">Listing&#XA0;7: <a id="lst:Initialise OpenGL"></a>Initialise OpenGL.</div><br>
<table class="lstframe" style="padding:1ex;background-color:white;border-style:solid;border-color:black;"><tr><td class="lstlisting"><span style="font-size:xx-small"><span style="color:#7F7F7F"> 266</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">//-----------</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 267</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:blue">void</span></span><span style="font-size:small"> </span><span style="font-size:small">initGL</span><span style="font-size:small">()</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 268</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">//-----------</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 269</span></span><span style="font-size:small"> </span><span style="font-size:small">{</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 270</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Enable the Z-buffer</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 271</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small">glEnable</span><span style="font-size:small">(</span><span style="font-size:small">GL_DEPTH_TEST</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 272</span></span><span style="font-size:small"> </span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 273</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Set the background colour</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 274</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small">glClearColor</span><span style="font-size:small">(0.5, 0.5, 0.5, 1.0);</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 275</span></span><span style="font-size:small"> </span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 276</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Check if any OpenGL error has occurred.</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 277</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// If any has, an exception is thrown</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 278</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small">checkOpenGLErrorStatus</span><span style="font-size:small">(</span><span style="font-size:small">__FILE__</span><span style="font-size:small">, </span><span style="font-size:small">__FUNCTION__</span><span style="font-size:small">, </span><span style="font-size:small">__LINE__</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 279</span></span><span style="font-size:small"> </span><span style="font-size:small">}</span></td></tr>
</table>
</div>
<!--TOC section id="sec10" Load 3D Objects-->
<h2 id="sec10" class="section">9&#XA0;&#XA0;Load 3D Objects</h2><!--SEC END --><p>
<a id="sec:Load Objects"></a></p><p>Listing&#XA0;<a href="#lst%3ALoad_Objects">8</a> shows how to create 3D objects. It 
implements 
two cubes. The first one makes use of a vertex list and an index list (see 
Figure&#XA0;<a href="#fig%3Acube_01">2</a>). The second cube only makes use of a vertex list. 
Vertices are repeated several times. This is because each vertex is shared by 
different triangles. The second cube is therefore much bigger in term of 
memory usage. Listing&#XA0;<a href="#lst%3ALoad_Objects">8</a> shows that our implementation 
supports both type of topology.</p><blockquote class="figure"><div class="center"><div class="center"><hr style="width:80%;height:2"></div>
Geometry.<br>
<img src="tutorial-01-glut003.png"><br>
 
Vertex list.<br>

<table border=1  style="border-spacing:0;" class="cellpadding1"><tr><td style="text-align:center;border:solid 1px;white-space:nowrap" >&nbsp;</td><td style="text-align:center;border:solid 1px;white-space:nowrap"  colspan=3><span style="font-weight:bold">Vertex List</span> </td></tr>
<tr><td style="text-align:center;border:solid 1px;white-space:nowrap" >	<span style="font-weight:bold">Vertex ID</span></td><td style="text-align:center;border:solid 1px;white-space:nowrap" ><span style="font-weight:bold">x</span></td><td style="text-align:center;border:solid 1px;white-space:nowrap" ><span style="font-weight:bold">y</span></td><td style="text-align:center;border:solid 1px;white-space:nowrap" ><span style="font-weight:bold">z</span> </td></tr>
<tr><td style="text-align:center;border:solid 1px;white-space:nowrap" >	0</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >-2.5 cm</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >2.5 cm</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >-2.5 cm </td></tr>
<tr><td style="text-align:center;border:solid 1px;white-space:nowrap" >	1</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >-2.5 cm</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >2.5 cm</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >2.5 cm </td></tr>
<tr><td style="text-align:center;border:solid 1px;white-space:nowrap" >	2</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >2.5 cm</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >2.5 cm</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >-2.5 cm </td></tr>
<tr><td style="text-align:center;border:solid 1px;white-space:nowrap" >	3</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >2.5 cm</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >2.5 cm</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >2.5 cm </td></tr>
<tr><td style="text-align:center;border:solid 1px;white-space:nowrap" >	4</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >-2.5 cm</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >-2.5 cm</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >-2.5 cm </td></tr>
<tr><td style="text-align:center;border:solid 1px;white-space:nowrap" >	5</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >-2.5 cm</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >-2.5 cm</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >2.5 cm </td></tr>
<tr><td style="text-align:center;border:solid 1px;white-space:nowrap" >	6</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >2.5 cm</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >-2.5 cm</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >-2.5 cm </td></tr>
<tr><td style="text-align:center;border:solid 1px;white-space:nowrap" >	7</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >2.5 cm</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >-2.5 cm</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >2.5 cm </td></tr>
</table>
<br>

Index list.<br>


<table border=1  style="border-spacing:0;" class="cellpadding1"><tr><td style="text-align:center;border:solid 1px;white-space:nowrap" >&nbsp;</td><td style="text-align:center;border:solid 1px;white-space:nowrap"  colspan=3><span style="font-weight:bold">Face List</span> </td></tr>
<tr><td style="text-align:center;border:solid 1px;white-space:nowrap" >&nbsp;</td><td style="text-align:center;border:solid 1px;white-space:nowrap" ><span style="font-weight:bold">i</span></td><td style="text-align:center;border:solid 1px;white-space:nowrap" ><span style="font-weight:bold">j</span></td><td style="text-align:center;border:solid 1px;white-space:nowrap" ><span style="font-weight:bold">k</span> </td></tr>
<tr><td style="text-align:center;border:solid 1px;white-space:nowrap" >	Top face</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >1</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >2</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >0 </td></tr>
<tr><td style="text-align:center;border:solid 1px;white-space:nowrap" >	Top face</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >2</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >1</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >3 </td></tr>
<tr><td style="text-align:center;border:solid 1px;white-space:nowrap" >	Bottom face</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >6</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >5</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >4 </td></tr>
<tr><td style="text-align:center;border:solid 1px;white-space:nowrap" >	Bottom face</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >5</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >6</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >7 </td></tr>
<tr><td style="text-align:center;border:solid 1px;white-space:nowrap" >	Front face</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >5</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >3</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >1 </td></tr>
<tr><td style="text-align:center;border:solid 1px;white-space:nowrap" >	Front face</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >3</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >5</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >7 </td></tr>
<tr><td style="text-align:center;border:solid 1px;white-space:nowrap" >	Back face</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >2</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >4</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >0 </td></tr>
<tr><td style="text-align:center;border:solid 1px;white-space:nowrap" >	Back face</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >4</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >2</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >6 </td></tr>
<tr><td style="text-align:center;border:solid 1px;white-space:nowrap" >	Left face</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >5</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >0</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >4 </td></tr>
<tr><td style="text-align:center;border:solid 1px;white-space:nowrap" >	Left face</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >0</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >5</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >1 </td></tr>
<tr><td style="text-align:center;border:solid 1px;white-space:nowrap" >	Right face</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >2</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >7</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >6 </td></tr>
<tr><td style="text-align:center;border:solid 1px;white-space:nowrap" >	Right face</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >7</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >2</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >3 </td></tr>
</table>
<div class="caption"><table style="border-spacing:6px;border-collapse:separate;" class="cellpading0"><tr><td style="vertical-align:top;text-align:left;" >Figure 2: <a id="fig:cube_01"></a> Topology of the first cube.</td></tr>
</table></div>
<div class="center"><hr style="width:80%;height:2"></div></div></blockquote><blockquote class="figure"><div class="center"><div class="center"><hr style="width:80%;height:2"></div>
Geometry.<br>
<img src="tutorial-01-glut004.png"><br>
 
Vertex list.<br>

<table border=1  style="border-spacing:0;" class="cellpadding1"><tr><td style="text-align:center;border:solid 1px;white-space:nowrap" >&nbsp;</td><td style="text-align:center;border:solid 1px;white-space:nowrap"  colspan=3><span style="font-weight:bold">Vertex List</span> </td></tr>
<tr><td style="text-align:center;border:solid 1px;white-space:nowrap" >	<span style="font-weight:bold">Vertex ID</span></td><td style="text-align:center;border:solid 1px;white-space:nowrap" ><span style="font-weight:bold">x</span></td><td style="text-align:center;border:solid 1px;white-space:nowrap" ><span style="font-weight:bold">y</span></td><td style="text-align:center;border:solid 1px;white-space:nowrap" ><span style="font-weight:bold">z</span> </td></tr>
<tr><td style="text-align:center;border:solid 1px;white-space:nowrap" >	 0</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >-2.5 cm</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >2.5 cm</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >2.5 cm </td></tr>
<tr><td style="text-align:center;border:solid 1px;white-space:nowrap" >	 1</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >2.5 cm</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >2.5 cm</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >-2.5 cm </td></tr>
<tr><td style="text-align:center;border:solid 1px;white-space:nowrap" >	 &#X22EE;</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >&#X22EE;</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >&#X22EE;</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >&#X22EE; </td></tr>
<tr><td style="text-align:center;border:solid 1px;white-space:nowrap" >	34</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >2.5 cm</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >2.5 cm</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >-2.5 cm </td></tr>
<tr><td style="text-align:center;border:solid 1px;white-space:nowrap" >	35</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >2.5 cm</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >2.5 cm</td><td style="text-align:center;border:solid 1px;white-space:nowrap" >2.5 cm </td></tr>
</table>
<div class="caption"><table style="border-spacing:6px;border-collapse:separate;" class="cellpading0"><tr><td style="vertical-align:top;text-align:left;" >Figure 3: <a id="fig:cube_02"></a> Topology of the second cube.</td></tr>
</table></div>
<div class="center"><hr style="width:80%;height:2"></div></div></blockquote><ul class="itemize"><li class="li-itemize">
<code>buildCube(length_1, cube_centre, g_p_vertex_set_1, </code>
<code>g_p_index_set_1)</code> creates the data required to model a cube using 
vertex data and index data. Its length is <code>length_1</code> and it is centred 
on <code>cube_centre</code> (0, 0, 0).</li><li class="li-itemize"><code>buildCube(length_2, cube_centre, g_p_vertex_set_2)</code> creates the 
data of another cube, but using vertex data only. Its length is 
<code>length_2</code> and it is also centred on 
<code>cube_centre</code>.</li><li class="li-itemize"><code>g_polygon_mesh_1.setExternalData(GL_TRIANGLES,</code> 
<code> &amp;g_p_vertex_set_1, &amp;g_p_index_set_1, </code><br>
<code>true, </code>
<code>GL_STATIC_DRAW)</code> loads both the vertex (<code>&amp;g_p_vertex_set_1</code>) and 
index (<code>&amp;g_p_index_set_1</code>) data of the geometry. 
<code>GL_TRIANGLES</code> indicates that the mesh corresponds to a triangle mesh. 
<code>true</code> means that the vertex buffer object (VBO) should be 
created instantly if 
possible. 
<code>GL_STATIC_DRAW</code> is used because the (VBO) data will be set once 
and used many times.</li><li class="li-itemize"><code>g_polygon_mesh_2.setExternalData(GL_TRIANGLES,</code> 
<code> &amp;g_p_vertex_set_2, true, </code><br>
 <code>GL_STATIC_DRAW)</code> loads the vertex (<code>&amp;g_p_vertex_set_2</code>) data of 
the geometry. There is no index data for this mesh. 
</li></ul><div class="center">

<div class="center">Listing&#XA0;8: <a id="lst:Load_Objects"></a>Create 3D objects.</div><br>
<table class="lstframe" style="padding:1ex;background-color:white;border-style:solid;border-color:black;"><tr><td class="lstlisting"><span style="font-size:xx-small"><span style="color:#7F7F7F"> 282</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">//------------------</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 283</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:blue">void</span></span><span style="font-size:small"> </span><span style="font-size:small">load3DObjects</span><span style="font-size:small">()</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 284</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">//------------------</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 285</span></span><span style="font-size:small"> </span><span style="font-size:small">{</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 286</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Centre of the cubes</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 287</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small">VEC3</span><span style="font-size:small"> </span><span style="font-size:small">cube_centre</span><span style="font-size:small">(0, 0, 0);</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 288</span></span><span style="font-size:small"> </span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 289</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Size of the cubes</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 290</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small">RATIONAL_NUMBER</span><span style="font-size:small"> </span><span style="font-size:small">length_1</span><span style="font-size:small">( 5.0 * </span><span style="font-size:small">cm</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 291</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small">RATIONAL_NUMBER</span><span style="font-size:small"> </span><span style="font-size:small">length_2</span><span style="font-size:small">(10.0 * </span><span style="font-size:small">cm</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 292</span></span><span style="font-size:small"> </span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 293</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Create the cube using vertex data and index data</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 294</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small">buildCube</span><span style="font-size:small">(</span><span style="font-size:small">length_1</span><span style="font-size:small">, </span><span style="font-size:small">cube_centre</span><span style="font-size:small">, </span><span style="font-size:small">g_p_vertex_set_1</span><span style="font-size:small">, </span><span style="font-size:small">g_p_index_set_1</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 295</span></span><span style="font-size:small"> </span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 296</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Create the cube using vertex data only</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 297</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small">buildCube</span><span style="font-size:small">(</span><span style="font-size:small">length_2</span><span style="font-size:small">, </span><span style="font-size:small">cube_centre</span><span style="font-size:small">, </span><span style="font-size:small">g_p_vertex_set_2</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 298</span></span><span style="font-size:small"> </span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 299</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Set geometry (using VAOs and VBOs)</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 300</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small">g_polygon_mesh_1</span><span style="font-size:small">.</span><span style="font-size:small">setExternalData</span><span style="font-size:small">(</span><span style="font-size:small">GL_TRIANGLES</span><span style="font-size:small">,</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 301</span></span><span style="font-size:small"> </span><span style="font-size:small">            &amp;</span><span style="font-size:small">g_p_vertex_set_1</span><span style="font-size:small">,</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 302</span></span><span style="font-size:small"> </span><span style="font-size:small">            &amp;</span><span style="font-size:small">g_p_index_set_1</span><span style="font-size:small">,</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 303</span></span><span style="font-size:small"> </span><span style="font-size:small">            </span><span style="font-size:small"><span style="color:blue">true</span></span><span style="font-size:small">,</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 304</span></span><span style="font-size:small"> </span><span style="font-size:small">            </span><span style="font-size:small">GL_STATIC_DRAW</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 305</span></span><span style="font-size:small"> </span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 306</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small">g_polygon_mesh_2</span><span style="font-size:small">.</span><span style="font-size:small">setExternalData</span><span style="font-size:small">(</span><span style="font-size:small">GL_TRIANGLES</span><span style="font-size:small">,</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 307</span></span><span style="font-size:small"> </span><span style="font-size:small">            &amp;</span><span style="font-size:small">g_p_vertex_set_2</span><span style="font-size:small">,</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 308</span></span><span style="font-size:small"> </span><span style="font-size:small">            </span><span style="font-size:small"><span style="color:blue">true</span></span><span style="font-size:small">,</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 309</span></span><span style="font-size:small"> </span><span style="font-size:small">            </span><span style="font-size:small">GL_STATIC_DRAW</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 310</span></span><span style="font-size:small"> </span><span style="font-size:small">}</span></td></tr>
</table>
</div>
<!--TOC section id="sec11" Display the 3D Scene-->
<h2 id="sec11" class="section">10&#XA0;&#XA0;Display the 3D Scene</h2><!--SEC END --><p>
<a id="sec:Display Scene"></a></p><p>Listing&#XA0;<a href="#lst%3ADisplay_Scene">9</a> shows how to display the 3D objects. 
</p><ul class="itemize"><li class="li-itemize">
// Clear the buffers
<code>glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT)</code> clears both the 
fragment and Z buffers.</li><li class="li-itemize"><code>pushShaderProgram()</code> adds the current shader program to the shader 
stack. It may become handy when multiple shaders are used.</li><li class="li-itemize"><code>g_display_shader.enable()</code> enables the given shader program.</li><li class="li-itemize">Its unique OpenGL ID can be retrieved with 
<code>g_display_shader.getProgramHandle()</code>.</li><li class="li-itemize">The status of the frame buffer object (FBO) can be checked with 
<code>checkFBOErrorStatus(__FILE__, __FUNCTION__, __LINE__)</code>. 
If an error had occurred, then an exception will be thrown.</li><li class="li-itemize">The status of the OpenGL&#X2019;s error flag can be checked with 
<code>checkOpenGLErrorStatus(__FILE__, __FUNCTION__, __LINE__)</code>. 
If an error had occurred, then an exception will be thrown.</li><li class="li-itemize"><code>g_current_projection_matrix</code> is the current projection matrix. 
<code>g_current_modelview_matrix</code> is the current modelling-viewing matrix. 
Section&#XA0;<a href="#sec%3Aframe%20buffer%20callback">13</a> shows how it can be set. 
Using a shader program, when the fixed pipeline functions are disabled (as in 
modern OpenGL implementation), the programmer has to supply the projection 
and modelling-viewing matrices to the shader program. This is what Lines&#XA0;22 
to&#XA0;30 are taking care of in Listing&#XA0;<a href="#lst%3ADisplay_Scene">9</a>.</li><li class="li-itemize">To store the current transformation matrices, 
<code>pushModelViewMatrix()</code> and <code>pushProjectionMatrix()</code> are used. 
They replace the old <code>glMatrixMode</code> and <code>glPushMatrix</code>, which are 
no longer available in modern OpenGL.</li><li class="li-itemize">To translate the 1<sup>st</sup> object, write
<code>g_current_modelview_matrix *=</code><br>
 <code>MATRIX4::buildTranslationMatrix(VEC3(8.0 * cm, 0.0, 0.0))</code>. This is 
similar to the old function <code>glTranslate</code>, which is now depreciated. </li><li class="li-itemize">To rotate this object, write 
<code>g_current_modelview_matrix *= g_object_1_rotation_matrix</code>. This is 
similar to the old function <code>glRotate</code>, which is now depreciated. </li><li class="li-itemize">To apply the changes to the shader program, call 
<code>applyModelViewMatrix()</code>.</li><li class="li-itemize">The 1<sup>st</sup> polygon mesh is displayed with 
<code>g_polygon_mesh_1.display()</code>.</li><li class="li-itemize">The transformation matrices are restored from the stack using 
<code>popModelViewMatrix()</code> and <code>popProjectionMatrix()</code>.</li><li class="li-itemize">The transformation matrices are stored in the stack using 
<code>pushModelViewMatrix()</code> and <code>pushProjectionMatrix()</code>.</li><li class="li-itemize">To translate the 2<sup>nd</sup> object, write
<code>g_current_modelview_matrix *=</code><br>
 <code>MATRIX4::buildTranslationMatrix(VEC3(-8.0 * cm, 0.0, 0.0))</code>.</li><li class="li-itemize">To rotate this object, write 
<code>g_current_modelview_matrix *= g_object_2_rotation_matrix</code>.</li><li class="li-itemize">To apply the changes to the shader program, call 
<code>applyModelViewMatrix()</code>.</li><li class="li-itemize">The 2<sup>nd</sup> object is displayed by 
<code>g_polygon_mesh_2.display()</code>.</li><li class="li-itemize">The transformation matrices are restored from the stack using 
<code>popModelViewMatrix()</code> and <code>popProjectionMatrix()</code>.</li><li class="li-itemize"><code>popShaderProgram()</code> disables the current shader and restores the 
previous shader from the stack.</li><li class="li-itemize">Finally, we check the error status of both OpenGL and the (FBO).</li></ul><div class="center">

<div class="center">Listing&#XA0;9: <a id="lst:Display_Scene"></a>display the 3D scene.</div><br>
<table class="lstframe" style="padding:1ex;background-color:white;border-style:solid;border-color:black;"><tr><td class="lstlisting"><span style="font-size:xx-small"><span style="color:#7F7F7F"> 313</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">//--------------------</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 314</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:blue">void</span></span><span style="font-size:small"> </span><span style="font-size:small">displayCallback</span><span style="font-size:small">()</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 315</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">//--------------------</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 316</span></span><span style="font-size:small"> </span><span style="font-size:small">{</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 317</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Clear the buffers</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 318</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small">glClear</span><span style="font-size:small">(</span><span style="font-size:small">GL_COLOR_BUFFER_BIT</span><span style="font-size:small"> | </span><span style="font-size:small">GL_DEPTH_BUFFER_BIT</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 319</span></span><span style="font-size:small"> </span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 320</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Add the current shader to the shader stack</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 321</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small">pushShaderProgram</span><span style="font-size:small">();</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 322</span></span><span style="font-size:small"> </span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 323</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Enable the shader</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 324</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small">g_display_shader</span><span style="font-size:small">.</span><span style="font-size:small">enable</span><span style="font-size:small">();</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 325</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small">GLint</span><span style="font-size:small"> </span><span style="font-size:small">shader_id</span><span style="font-size:small">(</span><span style="font-size:small">g_display_shader</span><span style="font-size:small">.</span><span style="font-size:small">getProgramHandle</span><span style="font-size:small">());</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 326</span></span><span style="font-size:small"> </span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 327</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Check the status of OpenGL and of the current FBO</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 328</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small">checkFBOErrorStatus</span><span style="font-size:small">(</span><span style="font-size:small">__FILE__</span><span style="font-size:small">, </span><span style="font-size:small">__FUNCTION__</span><span style="font-size:small">, </span><span style="font-size:small">__LINE__</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 329</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small">checkOpenGLErrorStatus</span><span style="font-size:small">(</span><span style="font-size:small">__FILE__</span><span style="font-size:small">, </span><span style="font-size:small">__FUNCTION__</span><span style="font-size:small">, </span><span style="font-size:small">__LINE__</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 330</span></span><span style="font-size:small"> </span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 331</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// A handle for shader resources</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 332</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small">GLuint</span><span style="font-size:small"> </span><span style="font-size:small">handle</span><span style="font-size:small">(0);</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 333</span></span><span style="font-size:small"> </span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 334</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Upload the projection matrix</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 335</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small">handle</span><span style="font-size:small"> = </span><span style="font-size:small">glGetUniformLocation</span><span style="font-size:small">(</span><span style="font-size:small">shader_id</span><span style="font-size:small">, </span><span style="font-size:small"><span style="color:#9300D1"><span style="font-size:small">"g_projection_matrix"</span></span></span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 336</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small">glUniformMatrix4fv</span><span style="font-size:small">(</span><span style="font-size:small">handle</span><span style="font-size:small">, 1, </span><span style="font-size:small">GL_FALSE</span><span style="font-size:small">, </span><span style="font-size:small">g_current_projection_matrix</span><span style="font-size:small">.</span><span style="font-size:small">get</span><span style="font-size:small">());</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 337</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small">checkOpenGLErrorStatus</span><span style="font-size:small">(</span><span style="font-size:small">__FILE__</span><span style="font-size:small">, </span><span style="font-size:small">__FUNCTION__</span><span style="font-size:small">, </span><span style="font-size:small">__LINE__</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 338</span></span><span style="font-size:small"> </span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 339</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Upload the modelview matrix</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 340</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small">handle</span><span style="font-size:small"> = </span><span style="font-size:small">glGetUniformLocation</span><span style="font-size:small">(</span><span style="font-size:small">shader_id</span><span style="font-size:small">, </span><span style="font-size:small"><span style="color:#9300D1"><span style="font-size:small">"g_modelview_matrix"</span></span></span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 341</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small">glUniformMatrix4fv</span><span style="font-size:small">(</span><span style="font-size:small">handle</span><span style="font-size:small">, 1, </span><span style="font-size:small">GL_FALSE</span><span style="font-size:small">, </span><span style="font-size:small">g_current_modelview_matrix</span><span style="font-size:small">.</span><span style="font-size:small">get</span><span style="font-size:small">());</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 342</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small">checkOpenGLErrorStatus</span><span style="font-size:small">(</span><span style="font-size:small">__FILE__</span><span style="font-size:small">, </span><span style="font-size:small">__FUNCTION__</span><span style="font-size:small">, </span><span style="font-size:small">__LINE__</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 343</span></span><span style="font-size:small"> </span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 344</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Store the current transformation matrices</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 345</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small">pushModelViewMatrix</span><span style="font-size:small">();</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 346</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small">pushProjectionMatrix</span><span style="font-size:small">();</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 347</span></span><span style="font-size:small"> </span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 348</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Translate the 1st object</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 349</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small">g_current_modelview_matrix</span><span style="font-size:small"> *= </span><span style="font-size:small">MATRIX4</span><span style="font-size:small">::</span><span style="font-size:small">buildTranslationMatrix</span><span style="font-size:small">(</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 350</span></span><span style="font-size:small"> </span><span style="font-size:small">            </span><span style="font-size:small">VEC3</span><span style="font-size:small">(8.0 * </span><span style="font-size:small">cm</span><span style="font-size:small">, 0.0, 0.0));</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 351</span></span><span style="font-size:small"> </span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 352</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Rotate the 1st object</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 353</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small">g_current_modelview_matrix</span><span style="font-size:small"> *= </span><span style="font-size:small">g_object_1_rotation_matrix</span><span style="font-size:small">;</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 354</span></span><span style="font-size:small"> </span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 355</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Apply the change to the shader program</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 356</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small">applyModelViewMatrix</span><span style="font-size:small">();</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 357</span></span><span style="font-size:small"> </span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 358</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Display the 1st object</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 359</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small">g_polygon_mesh_1</span><span style="font-size:small">.</span><span style="font-size:small">display</span><span style="font-size:small">();</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 360</span></span><span style="font-size:small"> </span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 361</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Restore the current transformation matrix</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 362</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small">popModelViewMatrix</span><span style="font-size:small">();</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 363</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small">popProjectionMatrix</span><span style="font-size:small">();</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 364</span></span><span style="font-size:small"> </span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 365</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Store the current transformation matrices</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 366</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small">pushModelViewMatrix</span><span style="font-size:small">();</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 367</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small">pushProjectionMatrix</span><span style="font-size:small">();</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 368</span></span><span style="font-size:small"> </span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 369</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Translate the 2nd object</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 370</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small">g_current_modelview_matrix</span><span style="font-size:small"> *= </span><span style="font-size:small">MATRIX4</span><span style="font-size:small">::</span><span style="font-size:small">buildTranslationMatrix</span><span style="font-size:small">(</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 371</span></span><span style="font-size:small"> </span><span style="font-size:small">            </span><span style="font-size:small">VEC3</span><span style="font-size:small">(-8.0 * </span><span style="font-size:small">cm</span><span style="font-size:small">, 0.0, 0.0));</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 372</span></span><span style="font-size:small"> </span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 373</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Rotate the 2nd object</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 374</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small">g_current_modelview_matrix</span><span style="font-size:small"> *= </span><span style="font-size:small">g_object_2_rotation_matrix</span><span style="font-size:small">;</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 375</span></span><span style="font-size:small"> </span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 376</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Apply the change to the shader program</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 377</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small">applyModelViewMatrix</span><span style="font-size:small">();</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 378</span></span><span style="font-size:small"> </span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 379</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Display the 2nd object</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 380</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small">g_polygon_mesh_2</span><span style="font-size:small">.</span><span style="font-size:small">display</span><span style="font-size:small">();</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 381</span></span><span style="font-size:small"> </span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 382</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Restore the current transformation matrix</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 383</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small">popModelViewMatrix</span><span style="font-size:small">();</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 384</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small">popProjectionMatrix</span><span style="font-size:small">();</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 385</span></span><span style="font-size:small"> </span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 386</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Disable the shader and restore the previous shader from the stack</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 387</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small">popShaderProgram</span><span style="font-size:small">();</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 388</span></span><span style="font-size:small"> </span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 389</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Check the status of OpenGL and of the current FBO</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 390</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small">checkFBOErrorStatus</span><span style="font-size:small">(</span><span style="font-size:small">__FILE__</span><span style="font-size:small">, </span><span style="font-size:small">__FUNCTION__</span><span style="font-size:small">, </span><span style="font-size:small">__LINE__</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 391</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small">checkOpenGLErrorStatus</span><span style="font-size:small">(</span><span style="font-size:small">__FILE__</span><span style="font-size:small">, </span><span style="font-size:small">__FUNCTION__</span><span style="font-size:small">, </span><span style="font-size:small">__LINE__</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 392</span></span><span style="font-size:small"> </span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 393</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Swap front and back buffers</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 394</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small">glutSwapBuffers</span><span style="font-size:small">();</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 395</span></span><span style="font-size:small"> </span><span style="font-size:small">}</span></td></tr>
</table>
</div>
<!--TOC section id="sec12" Idle Callback-->
<h2 id="sec12" class="section">11&#XA0;&#XA0;Idle Callback</h2><!--SEC END --><p>
<a id="sec:Idle Callback"></a></p><p>In the idle callback the rotation matrices are updated to create an animation 
(see Listing&#XA0;<a href="#lst%3AIdle%20callback">10</a>). 
<code>g_object_1_rotation_matrix.rotate(1.0, VEC3(1.0, 0.0, 0.0))</code> multiplies 
the transformation matrix (<code>g_object_1_rotation_matrix</code>) by a rotation 
matrix defined by angle in degrees (<code>1.0</code> in this example) and a rotation 
axis (<code>VEC3(1.0, 0.0, 0.0)</code>).</p><div class="center">

<div class="center">Listing&#XA0;10: <a id="lst:Idle callback"></a>Idle callback.</div><br>
<table class="lstframe" style="padding:1ex;background-color:white;border-style:solid;border-color:black;"><tr><td class="lstlisting"><span style="font-size:xx-small"><span style="color:#7F7F7F"> 399</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:blue">void</span></span><span style="font-size:small"> </span><span style="font-size:small">idleCallback</span><span style="font-size:small">()</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 400</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">//-----------------</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 401</span></span><span style="font-size:small"> </span><span style="font-size:small">{</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 402</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Rotate the objects</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 403</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small">g_object_1_rotation_matrix</span><span style="font-size:small">.</span><span style="font-size:small">rotate</span><span style="font-size:small">(1.0, </span><span style="font-size:small">VEC3</span><span style="font-size:small">(1.0, 0.0, 0.0));</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 404</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small">g_object_2_rotation_matrix</span><span style="font-size:small">.</span><span style="font-size:small">rotate</span><span style="font-size:small">(2.0, </span><span style="font-size:small">VEC3</span><span style="font-size:small">(0.0, 1.0, 0.0));</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 405</span></span><span style="font-size:small"> </span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 406</span></span><span style="font-size:small"> </span><span style="font-size:small">  </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Redisplay the scene</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 407</span></span><span style="font-size:small"> </span><span style="font-size:small">  </span><span style="font-size:small">glutPostRedisplay</span><span style="font-size:small">();</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 408</span></span><span style="font-size:small"> </span><span style="font-size:small">}</span></td></tr>
</table>
</div><p>	
</p>
<!--TOC section id="sec13" Quit Callback-->
<h2 id="sec13" class="section">12&#XA0;&#XA0;Quit Callback</h2><!--SEC END --><p>
<a id="sec:Quit Callback"></a></p><p>Listing&#XA0;<a href="#lst%3AQuit%20callback">11</a> shows how to clean up GLUT. 
If the window exists, then it is destroyed. 
Finally, the GLUT application is terminated. </p><div class="center">

<div class="center">Listing&#XA0;11: <a id="lst:Quit callback"></a>Quit callback.</div><br>
<table class="lstframe" style="padding:1ex;background-color:white;border-style:solid;border-color:black;"><tr><td class="lstlisting"><span style="font-size:xx-small"><span style="color:#7F7F7F"> 411</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">//-----------------</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 412</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:blue">void</span></span><span style="font-size:small"> </span><span style="font-size:small">quitCallback</span><span style="font-size:small">()</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 413</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">//-----------------</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 414</span></span><span style="font-size:small"> </span><span style="font-size:small">{</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 415</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// The window exists</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 416</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:blue">if</span></span><span style="font-size:small"> (</span><span style="font-size:small">g_window_id</span><span style="font-size:small">)</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 417</span></span><span style="font-size:small"> </span><span style="font-size:small">    {</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 418</span></span><span style="font-size:small"> </span><span style="font-size:small">        </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Close the window</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 419</span></span><span style="font-size:small"> </span><span style="font-size:small">        </span><span style="font-size:small">glutDestroyWindow</span><span style="font-size:small">(</span><span style="font-size:small">g_window_id</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 420</span></span><span style="font-size:small"> </span><span style="font-size:small">        </span><span style="font-size:small">g_window_id</span><span style="font-size:small"> = 0;</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 421</span></span><span style="font-size:small"> </span><span style="font-size:small">    }</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 422</span></span><span style="font-size:small"> </span><span style="font-size:small">}</span></td></tr>
</table>
</div>
<!--TOC section id="sec14" Frame Buffer Size Callback-->
<h2 id="sec14" class="section">13&#XA0;&#XA0;Frame Buffer Size Callback</h2><!--SEC END --><p>
<a id="sec:frame buffer callback"></a></p><p>This callback is called when the size of the frame buffer changes, that is to 
say when the size of the window changes. In this function three main things are 
performed (see Listing&#XA0;<a href="#lst%3Aframe%20buffer%20callback">12</a>).
</p><ul class="itemize"><li class="li-itemize">
Set the OpenGL&#X2019;s viewport with <code>glViewport</code>.</li><li class="li-itemize">Set the projection matrix. In this example; we use 
<code>loadPerspectiveProjectionMatrix</code> to set 
<code>g_current_projection_matrix</code>. It is similar to <code>gluPerspective</code>, 
which is not available in modern OpenGL.</li><li class="li-itemize">Set the modelling-viewing transformation. In this example; we use 
<code>loadLookAtModelViewMatrix</code> to set 
<code>g_current_modelview_matrix</code>. It is similar to <code>gluLookAt</code>, 
which is not available in modern OpenGL.</li></ul><div class="center">

<div class="center">Listing&#XA0;12: <a id="lst:frame buffer callback"></a>Change of frame buffer 
size callback.</div><br>
<table class="lstframe" style="padding:1ex;background-color:white;border-style:solid;border-color:black;"><tr><td class="lstlisting"><span style="font-size:xx-small"><span style="color:#7F7F7F"> 425</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">//-------------------------------------------------</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 426</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:blue">void</span></span><span style="font-size:small"> </span><span style="font-size:small">framebufferSizeCallback</span><span style="font-size:small">(</span><span style="font-size:small"><span style="color:blue">int</span></span><span style="font-size:small"> </span><span style="font-size:small">width</span><span style="font-size:small">, </span><span style="font-size:small"><span style="color:blue">int</span></span><span style="font-size:small"> </span><span style="font-size:small">height</span><span style="font-size:small">)</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 427</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">//-------------------------------------------------</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 428</span></span><span style="font-size:small"> </span><span style="font-size:small">{</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 429</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Avoid a division by zero</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 430</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:blue">if</span></span><span style="font-size:small"> (</span><span style="font-size:small">height</span><span style="font-size:small"> == 0)</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 431</span></span><span style="font-size:small"> </span><span style="font-size:small">    {</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 432</span></span><span style="font-size:small"> </span><span style="font-size:small">        </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Prevent divide by 0</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 433</span></span><span style="font-size:small"> </span><span style="font-size:small">        </span><span style="font-size:small">height</span><span style="font-size:small"> = 1;</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 434</span></span><span style="font-size:small"> </span><span style="font-size:small">    }</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 435</span></span><span style="font-size:small"> </span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 436</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:blue">int</span></span><span style="font-size:small"> </span><span style="font-size:small">x</span><span style="font-size:small">(0), </span><span style="font-size:small">y</span><span style="font-size:small">(0), </span><span style="font-size:small">w</span><span style="font-size:small">(</span><span style="font-size:small">width</span><span style="font-size:small">), </span><span style="font-size:small">h</span><span style="font-size:small">(</span><span style="font-size:small">height</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 437</span></span><span style="font-size:small"> </span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 438</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Store the width and height of the window</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 439</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small">g_window_width</span><span style="font-size:small"> = </span><span style="font-size:small">width</span><span style="font-size:small">;</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 440</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small">g_window_height</span><span style="font-size:small"> = </span><span style="font-size:small">height</span><span style="font-size:small">;</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 441</span></span><span style="font-size:small"> </span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 442</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Compute the aspect ratio of the size of the window</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 443</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:blue">double</span></span><span style="font-size:small"> </span><span style="font-size:small">screen_aspect_ratio</span><span style="font-size:small">(</span><span style="font-size:small"><span style="color:blue">double</span></span><span style="font-size:small">(</span><span style="font-size:small">g_window_width</span><span style="font-size:small">) / </span><span style="font-size:small"><span style="color:blue">double</span></span><span style="font-size:small">(</span><span style="font-size:small">g_window_height</span><span style="font-size:small">));</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 444</span></span><span style="font-size:small"> </span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 445</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Update the viewport</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 446</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small">glViewport</span><span style="font-size:small">(</span><span style="font-size:small">x</span><span style="font-size:small">, </span><span style="font-size:small">y</span><span style="font-size:small">, </span><span style="font-size:small">w</span><span style="font-size:small">, </span><span style="font-size:small">h</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 447</span></span><span style="font-size:small"> </span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 448</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Set up the projection matrix (g_current_projection_matrix)</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 449</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small">loadPerspectiveProjectionMatrix</span><span style="font-size:small">(45.0, </span><span style="font-size:small">screen_aspect_ratio</span><span style="font-size:small">, 0.1 * </span><span style="font-size:small">cm</span><span style="font-size:small">, 5000.0 * </span><span style="font-size:small">cm</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 450</span></span><span style="font-size:small"> </span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 451</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Set up the modelling-viewing matrix (g_current_modelview_matrix)</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 452</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small">loadLookAtModelViewMatrix</span><span style="font-size:small">(50.0 * </span><span style="font-size:small">cm</span><span style="font-size:small">, 50.0 * </span><span style="font-size:small">cm</span><span style="font-size:small">, </span><span style="font-size:small">g_zoom</span><span style="font-size:small">,</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 453</span></span><span style="font-size:small"> </span><span style="font-size:small">            0.0, 0.0, 0.0,</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 454</span></span><span style="font-size:small"> </span><span style="font-size:small">            0.0, 1.0, 0.0);</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 455</span></span><span style="font-size:small"> </span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 456</span></span><span style="font-size:small"> </span><span style="font-size:small">  </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Redisplay the scene</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 457</span></span><span style="font-size:small"> </span><span style="font-size:small">  </span><span style="font-size:small">glutPostRedisplay</span><span style="font-size:small">();</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 458</span></span><span style="font-size:small"> </span><span style="font-size:small">}</span></td></tr>
</table>
</div>
<!--TOC section id="sec15" Keyboard Callback-->
<h2 id="sec15" class="section">14&#XA0;&#XA0;Keyboard Callback</h2><!--SEC END --><p>
<a id="sec:Keyboard Callback"></a></p><p>Listing&#XA0;<a href="#lst%3AKeyboard%20Callback">13</a> shows a typical GLUT keyboard callback. 
Here the window is closed when the user presses <code>Q</code> or <code>Esc</code>.</p><div class="center">

<div class="center">Listing&#XA0;13: <a id="lst:Keyboard Callback"></a>Keyboard callback.</div><br>
<table class="lstframe" style="padding:1ex;background-color:white;border-style:solid;border-color:black;"><tr><td class="lstlisting"><span style="font-size:xx-small"><span style="color:#7F7F7F"> 461</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">//------------------------------------------------------------------</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 462</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:blue">void</span></span><span style="font-size:small"> </span><span style="font-size:small">keyCallback</span><span style="font-size:small">(</span><span style="font-size:small"><span style="color:blue">unsigned</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:blue">char</span></span><span style="font-size:small"> </span><span style="font-size:small">aKey</span><span style="font-size:small">, </span><span style="font-size:small"><span style="color:blue">int</span></span><span style="font-size:small"> </span><span style="font-size:small">aXPosition</span><span style="font-size:small">, </span><span style="font-size:small"><span style="color:blue">int</span></span><span style="font-size:small"> </span><span style="font-size:small">aYPosition</span><span style="font-size:small">)</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 463</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">//------------------------------------------------------------------</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 464</span></span><span style="font-size:small"> </span><span style="font-size:small">{</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 465</span></span><span style="font-size:small"> </span><span style="font-size:small">  </span><span style="font-size:small"><span style="color:blue">switch</span></span><span style="font-size:small">(</span><span style="font-size:small">aKey</span><span style="font-size:small">)</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 466</span></span><span style="font-size:small"> </span><span style="font-size:small">  {</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 467</span></span><span style="font-size:small"> </span><span style="font-size:small">  </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Close the program</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 468</span></span><span style="font-size:small"> </span><span style="font-size:small">  </span><span style="font-size:small"><span style="color:blue">case</span></span><span style="font-size:small"> 27:</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 469</span></span><span style="font-size:small"> </span><span style="font-size:small">  </span><span style="font-size:small"><span style="color:blue">case</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:#9300D1"><span style="font-size:small">'q'</span></span></span><span style="font-size:small">:</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 470</span></span><span style="font-size:small"> </span><span style="font-size:small">        </span><span style="font-size:small">quitCallback</span><span style="font-size:small">();</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 471</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small">exit</span><span style="font-size:small">(</span><span style="font-size:small">EXIT_SUCCESS</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 472</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:blue">break</span></span><span style="font-size:small">;</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 473</span></span><span style="font-size:small"> </span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 474</span></span><span style="font-size:small"> </span><span style="font-size:small">  </span><span style="font-size:small"><span style="color:blue">default</span></span><span style="font-size:small">:</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 475</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:blue">break</span></span><span style="font-size:small">;</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 476</span></span><span style="font-size:small"> </span><span style="font-size:small">  }</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 477</span></span><span style="font-size:small"> </span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 478</span></span><span style="font-size:small"> </span><span style="font-size:small">  </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Redisplay the scene</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 479</span></span><span style="font-size:small"> </span><span style="font-size:small">  </span><span style="font-size:small">glutPostRedisplay</span><span style="font-size:small">();</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 480</span></span><span style="font-size:small"> </span><span style="font-size:small">}</span></td></tr>
</table>
</div>
<!--TOC section id="sec16" Scroll Button Callback-->
<h2 id="sec16" class="section">15&#XA0;&#XA0;Scroll Button Callback</h2><!--SEC END --><p>
<a id="sec:Scroll button callback"></a></p><p>The zoom is updated with the mouse wheel 
(see Listing&#XA0;<a href="#lst%3AScroll%20button%20callback">14</a>). 
To update the modelling-viewing matrix, the Frame Buffer Size Callback is 
called.</p><div class="center">

<div class="center">Listing&#XA0;14: <a id="lst:Scroll button callback"></a>Scroll button callback.</div><br>
<table class="lstframe" style="padding:1ex;background-color:white;border-style:solid;border-color:black;"><tr><td class="lstlisting"><span style="font-size:xx-small"><span style="color:#7F7F7F"> 482</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">//--------------------------------------------------------------------------</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 483</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:blue">void</span></span><span style="font-size:small"> </span><span style="font-size:small">scrollCallback</span><span style="font-size:small">(</span><span style="font-size:small"><span style="color:blue">int</span></span><span style="font-size:small"> </span><span style="font-size:small">aButton</span><span style="font-size:small">, </span><span style="font-size:small"><span style="color:blue">int</span></span><span style="font-size:small"> </span><span style="font-size:small">aState</span><span style="font-size:small">, </span><span style="font-size:small"><span style="color:blue">int</span></span><span style="font-size:small"> </span><span style="font-size:small">aXPosition</span><span style="font-size:small">, </span><span style="font-size:small"><span style="color:blue">int</span></span><span style="font-size:small"> </span><span style="font-size:small">aYPosition</span><span style="font-size:small">)</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 484</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">//--------------------------------------------------------------------------</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 485</span></span><span style="font-size:small"> </span><span style="font-size:small">{</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 486</span></span><span style="font-size:small"> </span><span style="font-size:small">  </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// The button is down</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 487</span></span><span style="font-size:small"> </span><span style="font-size:small">  </span><span style="font-size:small"><span style="color:blue">if</span></span><span style="font-size:small"> (</span><span style="font-size:small">aState</span><span style="font-size:small"> == </span><span style="font-size:small">GLUT_DOWN</span><span style="font-size:small">)</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 488</span></span><span style="font-size:small"> </span><span style="font-size:small">  {</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 489</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// This is a wheel event</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 490</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:blue">if</span></span><span style="font-size:small"> (</span><span style="font-size:small">aButton</span><span style="font-size:small"> == 3)</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 491</span></span><span style="font-size:small"> </span><span style="font-size:small">    {</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 492</span></span><span style="font-size:small"> </span><span style="font-size:small">          </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Change the zoom</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 493</span></span><span style="font-size:small"> </span><span style="font-size:small">          </span><span style="font-size:small">g_zoom</span><span style="font-size:small"> += 5 * </span><span style="font-size:small">cm</span><span style="font-size:small">;</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 494</span></span><span style="font-size:small"> </span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 495</span></span><span style="font-size:small"> </span><span style="font-size:small">          </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Update the projection matrix</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 496</span></span><span style="font-size:small"> </span><span style="font-size:small">          </span><span style="font-size:small">framebufferSizeCallback</span><span style="font-size:small">(</span><span style="font-size:small">g_window_width</span><span style="font-size:small">, </span><span style="font-size:small">g_window_height</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 497</span></span><span style="font-size:small"> </span><span style="font-size:small">    }</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 498</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// This is a wheel event</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 499</span></span><span style="font-size:small"> </span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:blue">else</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:blue">if</span></span><span style="font-size:small"> (</span><span style="font-size:small">aButton</span><span style="font-size:small"> == 4)</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 500</span></span><span style="font-size:small"> </span><span style="font-size:small">    {</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 501</span></span><span style="font-size:small"> </span><span style="font-size:small">      </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Change the zoom</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 502</span></span><span style="font-size:small"> </span><span style="font-size:small">      </span><span style="font-size:small">g_zoom</span><span style="font-size:small"> -= 5 * </span><span style="font-size:small">cm</span><span style="font-size:small">;</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 503</span></span><span style="font-size:small"> </span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 504</span></span><span style="font-size:small"> </span><span style="font-size:small">      </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Update the projection matrix</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 505</span></span><span style="font-size:small"> </span><span style="font-size:small">      </span><span style="font-size:small">framebufferSizeCallback</span><span style="font-size:small">(</span><span style="font-size:small">g_window_width</span><span style="font-size:small">, </span><span style="font-size:small">g_window_height</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 506</span></span><span style="font-size:small"> </span><span style="font-size:small">    }</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 507</span></span><span style="font-size:small"> </span><span style="font-size:small">  }</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 508</span></span><span style="font-size:small"> </span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 509</span></span><span style="font-size:small"> </span><span style="font-size:small">  </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Redisplay the scene</span></span></span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 510</span></span><span style="font-size:small"> </span><span style="font-size:small">  </span><span style="font-size:small">glutPostRedisplay</span><span style="font-size:small">();</span><span style="font-size:small">
</span><span style="font-size:xx-small"><span style="color:#7F7F7F"> 511</span></span><span style="font-size:small"> </span><span style="font-size:small">}</span></td></tr>
</table>
</div>
<!--TOC section id="sec17" Next Tutorial...-->
<h2 id="sec17" class="section">16&#XA0;&#XA0;Next Tutorial...</h2><!--SEC END --><p>
<a id="sec:Next Tutorial"></a></p><p>In the next tutorial:
</p><ul class="itemize"><li class="li-itemize">
	Load the shader from a file compressed using 
		the Zlib&#XA0;<sup><a id="text5" href="#note5">5</a></sup>
	</li><li class="li-itemize">We will see how to create an efficient mouse control to turn the 
		3D scene. 
</li></ul>
<!--TOC section id="sec18" Program Source Code-->
<h2 id="sec18" class="section">A&#XA0;&#XA0;Program Source Code</h2><!--SEC END --><p>
<a id="sec:Program Source Code"></a></p><div class="center">

<div class="center">Listing&#XA0;15: <a id="lst:Program Source Code"></a>All the source code of this tutorial.</div><br>
<table class="lstframe" style="padding:1ex;background-color:white;border-style:solid;border-color:black;"><tr><td class="lstlisting"><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">/*</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">Copyright (c) 2014, Dr Franck P. Vidal (franck.p.vidal@fpvidal.net),</span><span style="font-size:small">
</span><span style="font-size:small">http://www.fpvidal.net/</span><span style="font-size:small">
</span><span style="font-size:small">All rights reserved.</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">Redistribution and use in source and binary forms, with or without modification,</span><span style="font-size:small">
</span><span style="font-size:small">are permitted provided that the following conditions are met:</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">1. Redistributions of source code must retain the above copyright notice,</span><span style="font-size:small">
</span><span style="font-size:small">this list of conditions and the following disclaimer.</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">2. Redistributions in binary form must reproduce the above copyright notice,</span><span style="font-size:small">
</span><span style="font-size:small">this list of conditions and the following disclaimer in the documentation and/or</span><span style="font-size:small">
</span><span style="font-size:small">other materials provided with the distribution.</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">3. Neither the name of the Bangor University nor the names of its contributors</span><span style="font-size:small">
</span><span style="font-size:small">may be used to endorse or promote products derived from this software without</span><span style="font-size:small">
</span><span style="font-size:small">specific prior written permission.</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND</span><span style="font-size:small">
</span><span style="font-size:small">ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,</span><span style="font-size:small">
</span><span style="font-size:small">THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE</span><span style="font-size:small">
</span><span style="font-size:small">ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE</span><span style="font-size:small">
</span><span style="font-size:small">FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL</span><span style="font-size:small">
</span><span style="font-size:small">DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR</span><span style="font-size:small">
</span><span style="font-size:small">SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER</span><span style="font-size:small">
</span><span style="font-size:small">CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,</span><span style="font-size:small">
</span><span style="font-size:small">OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF</span><span style="font-size:small">
</span><span style="font-size:small">THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">*/</span></span></span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">/**</span><span style="font-size:small">
</span><span style="font-size:small">********************************************************************************</span><span style="font-size:small">
</span><span style="font-size:small">*</span><span style="font-size:small">
</span><span style="font-size:small">*   @file       tutorial_01_glut.cxx</span><span style="font-size:small">
</span><span style="font-size:small">*</span><span style="font-size:small">
</span><span style="font-size:small">*   @brief      Creating a Window and an OpenGL 2.x Context Using GLUT.</span><span style="font-size:small">
</span><span style="font-size:small">*</span><span style="font-size:small">
</span><span style="font-size:small">*   @version    1.0</span><span style="font-size:small">
</span><span style="font-size:small">*</span><span style="font-size:small">
</span><span style="font-size:small">*   @date       17/08/2014</span><span style="font-size:small">
</span><span style="font-size:small">*   @author     Dr Franck P. Vidal</span><span style="font-size:small">
</span><span style="font-size:small">*</span><span style="font-size:small">
</span><span style="font-size:small">*   @section    License</span><span style="font-size:small">
</span><span style="font-size:small">*               BSD 3-Clause License.</span><span style="font-size:small">
</span><span style="font-size:small">*</span><span style="font-size:small">
</span><span style="font-size:small">*               For details on use and redistribution please refer</span><span style="font-size:small">
</span><span style="font-size:small">*               to http://opensource.org/licenses/BSD-3-Clause</span><span style="font-size:small">
</span><span style="font-size:small">*</span><span style="font-size:small">
</span><span style="font-size:small">*   @section    Copyright</span><span style="font-size:small">
</span><span style="font-size:small">*               (c) by Dr Franck P. Vidal (franck.p.vidal@fpvidal.net),</span><span style="font-size:small">
</span><span style="font-size:small">*               http://www.fpvidal.net/, Dec 2014, 2014, version 1.0,</span><span style="font-size:small">
</span><span style="font-size:small">*               BSD 3-Clause License</span><span style="font-size:small">
</span><span style="font-size:small">*</span><span style="font-size:small">
</span><span style="font-size:small">********************************************************************************</span><span style="font-size:small">
</span><span style="font-size:small">*/</span></span></span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">//******************************************************************************</span></span></span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">//  Include</span></span></span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">//******************************************************************************</span></span></span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:blue">#include</span></span><span style="font-size:small"> &lt;</span><span style="font-size:small">GL</span><span style="font-size:small">/</span><span style="font-size:small">glew</span><span style="font-size:small">.</span><span style="font-size:small">h</span><span style="font-size:small">&gt;  </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Handle shaders</span></span></span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Create an OpenGL context and attach a window to it</span></span></span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:blue">#ifdef</span></span><span style="font-size:small"> </span><span style="font-size:small">__APPLE__</span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:blue">#include</span></span><span style="font-size:small"> &lt;</span><span style="font-size:small">GLUT</span><span style="font-size:small">/</span><span style="font-size:small">glut</span><span style="font-size:small">.</span><span style="font-size:small">h</span><span style="font-size:small">&gt;</span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:blue">#else</span></span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:blue">#include</span></span><span style="font-size:small"> &lt;</span><span style="font-size:small">GL</span><span style="font-size:small">/</span><span style="font-size:small">glut</span><span style="font-size:small">.</span><span style="font-size:small">h</span><span style="font-size:small">&gt;</span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:blue">#endif</span></span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:blue">#include</span></span><span style="font-size:small"> &lt;</span><span style="font-size:small">iostream</span><span style="font-size:small">&gt;   </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Print error messages in the console</span></span></span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:blue">#include</span></span><span style="font-size:small"> &lt;</span><span style="font-size:small">sstream</span><span style="font-size:small">&gt;    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Generate error messages</span></span></span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:blue">#include</span></span><span style="font-size:small"> &lt;</span><span style="font-size:small">exception</span><span style="font-size:small">&gt;  </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Catch C++ exception</span></span></span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:blue">#include</span></span><span style="font-size:small"> &lt;</span><span style="font-size:small">cstdlib</span><span style="font-size:small">&gt;    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Define return status (EXIT_SUCCESS and EXIT_FAILURE)</span></span></span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Define new types, e.g.~RATIONAL_NUMBER, VEC2, VEC3 and MATRIX4 to name a few</span></span></span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:blue">#include</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:#9300D1"><span style="font-size:small">"gVirtualXRay/Types.h"</span></span></span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Define units such as metre, kilometre, electronvolt, gram, kilogram, etc.</span></span></span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:blue">#include</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:#9300D1"><span style="font-size:small">"gVirtualXRay/Units.h"</span></span></span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Some utility functions about OpenGL, e.g. matrix stacks,</span></span></span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// how to set the projection matrix, etc.</span></span></span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:blue">#include</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:#9300D1"><span style="font-size:small">"gVirtualXRay/OpenGLUtilities.h"</span></span></span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:blue">#include</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:#9300D1"><span style="font-size:small">"gVirtualXRay/PolygonMesh.h"</span></span></span><span style="font-size:small">  </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Handle 3D triangle meshes</span></span></span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:blue">#include</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:#9300D1"><span style="font-size:small">"gVirtualXRay/Shader.h"</span></span></span><span style="font-size:small">       </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Handle GLSL programs</span></span></span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:blue">#include</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:#9300D1"><span style="font-size:small">"buildCube.h"</span></span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Create the triangle mesh of a cube</span></span></span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">//******************************************************************************</span></span></span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">//  Name space</span></span></span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">//******************************************************************************</span></span></span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:blue">using</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:blue">namespace</span></span><span style="font-size:small"> </span><span style="font-size:small">gVirtualXRay</span><span style="font-size:small">;</span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:blue">using</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:blue">namespace</span></span><span style="font-size:small"> </span><span style="font-size:small">std</span><span style="font-size:small">;</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">//******************************************************************************</span></span></span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">//  Global variables</span></span></span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">//******************************************************************************</span></span></span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Keep track of the window width</span></span></span><span style="font-size:small">
</span><span style="font-size:small">GLsizei</span><span style="font-size:small"> </span><span style="font-size:small">g_window_width</span><span style="font-size:small">(640);</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Keep track of the window height</span></span></span><span style="font-size:small">
</span><span style="font-size:small">GLsizei</span><span style="font-size:small"> </span><span style="font-size:small">g_window_height</span><span style="font-size:small">(480);</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// GLUT window ID</span></span></span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:blue">int</span></span><span style="font-size:small"> </span><span style="font-size:small">g_window_id</span><span style="font-size:small">(0);</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Shader program used to display the 3D scene</span></span></span><span style="font-size:small">
</span><span style="font-size:small">Shader</span><span style="font-size:small"> </span><span style="font-size:small">g_display_shader</span><span style="font-size:small">;</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// 3D objects as VAOs and VBOs</span></span></span><span style="font-size:small">
</span><span style="font-size:small">PolygonMesh</span><span style="font-size:small"> </span><span style="font-size:small">g_polygon_mesh_1</span><span style="font-size:small">;</span><span style="font-size:small">
</span><span style="font-size:small">PolygonMesh</span><span style="font-size:small"> </span><span style="font-size:small">g_polygon_mesh_2</span><span style="font-size:small">;</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Transformation matrices</span></span></span><span style="font-size:small">
</span><span style="font-size:small">MATRIX4</span><span style="font-size:small"> </span><span style="font-size:small">g_object_1_rotation_matrix</span><span style="font-size:small">;</span><span style="font-size:small">
</span><span style="font-size:small">MATRIX4</span><span style="font-size:small"> </span><span style="font-size:small">g_object_2_rotation_matrix</span><span style="font-size:small">;</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Geometric data</span></span></span><span style="font-size:small">
</span><span style="font-size:small">vector</span><span style="font-size:small">&lt;</span><span style="font-size:small"><span style="color:blue">double</span></span><span style="font-size:small">&gt; </span><span style="font-size:small">g_p_vertex_set_1</span><span style="font-size:small">;</span><span style="font-size:small">
</span><span style="font-size:small">vector</span><span style="font-size:small">&lt;</span><span style="font-size:small"><span style="color:blue">unsigned</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:blue">char</span></span><span style="font-size:small">&gt; </span><span style="font-size:small">g_p_index_set_1</span><span style="font-size:small">;</span><span style="font-size:small">
</span><span style="font-size:small">vector</span><span style="font-size:small">&lt;</span><span style="font-size:small"><span style="color:blue">float</span></span><span style="font-size:small">&gt; </span><span style="font-size:small">g_p_vertex_set_2</span><span style="font-size:small">;</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Control the zoom</span></span></span><span style="font-size:small">
</span><span style="font-size:small">RATIONAL_NUMBER</span><span style="font-size:small"> </span><span style="font-size:small">g_zoom</span><span style="font-size:small">(50.0 * </span><span style="font-size:small">cm</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Vertex shader</span></span></span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:blue">const</span></span><span style="font-size:small"> </span><span style="font-size:small">GLchar</span><span style="font-size:small">* </span><span style="font-size:small">g_vertex_shader</span><span style="font-size:small"> = </span><span style="font-size:small"><span style="color:#9300D1"><span style="font-size:small">"\</span><span style="font-size:small">
</span><span style="font-size:small">\n#version 110\n \</span><span style="font-size:small">
</span><span style="font-size:small">\n \</span><span style="font-size:small">
</span><span style="font-size:small">uniform mat4 g_projection_matrix;\n \</span><span style="font-size:small">
</span><span style="font-size:small">uniform mat4 g_modelview_matrix;\n \</span><span style="font-size:small">
</span><span style="font-size:small">\n \</span><span style="font-size:small">
</span><span style="font-size:small">void main(void)\n \</span><span style="font-size:small">
</span><span style="font-size:small">{\n \</span><span style="font-size:small">
</span><span style="font-size:small">    gl_Position = g_projection_matrix * g_modelview_matrix * vec4(gl_Vertex.xyz, 1.0);\n \</span><span style="font-size:small">
</span><span style="font-size:small">}\n \</span><span style="font-size:small">
</span><span style="font-size:small">"</span></span></span><span style="font-size:small">;</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Fragment shader</span></span></span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:blue">const</span></span><span style="font-size:small"> </span><span style="font-size:small">GLchar</span><span style="font-size:small">* </span><span style="font-size:small">g_fragment_shader</span><span style="font-size:small"> = </span><span style="font-size:small"><span style="color:#9300D1"><span style="font-size:small">"\</span><span style="font-size:small">
</span><span style="font-size:small">\n#version 110\n \</span><span style="font-size:small">
</span><span style="font-size:small">\n \</span><span style="font-size:small">
</span><span style="font-size:small">void main(void)\n \</span><span style="font-size:small">
</span><span style="font-size:small">{\n \</span><span style="font-size:small">
</span><span style="font-size:small">    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);\n \</span><span style="font-size:small">
</span><span style="font-size:small">}\n \</span><span style="font-size:small">
</span><span style="font-size:small">"</span></span></span><span style="font-size:small">;</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">//******************************************************************************</span></span></span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">//  Function declaration</span></span></span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">//******************************************************************************</span></span></span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:blue">void</span></span><span style="font-size:small"> </span><span style="font-size:small">initGLUT</span><span style="font-size:small">(</span><span style="font-size:small"><span style="color:blue">int</span></span><span style="font-size:small"> </span><span style="font-size:small">argc</span><span style="font-size:small">, </span><span style="font-size:small"><span style="color:blue">char</span></span><span style="font-size:small">** </span><span style="font-size:small">argv</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:blue">void</span></span><span style="font-size:small"> </span><span style="font-size:small">initGLEW</span><span style="font-size:small">();</span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:blue">void</span></span><span style="font-size:small"> </span><span style="font-size:small">initGL</span><span style="font-size:small">();</span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:blue">void</span></span><span style="font-size:small"> </span><span style="font-size:small">load3DObjects</span><span style="font-size:small">();</span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:blue">void</span></span><span style="font-size:small"> </span><span style="font-size:small">displayCallback</span><span style="font-size:small">();</span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:blue">void</span></span><span style="font-size:small"> </span><span style="font-size:small">idleCallback</span><span style="font-size:small">();</span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:blue">void</span></span><span style="font-size:small"> </span><span style="font-size:small">quitCallback</span><span style="font-size:small">();</span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:blue">void</span></span><span style="font-size:small"> </span><span style="font-size:small">framebufferSizeCallback</span><span style="font-size:small">(</span><span style="font-size:small"><span style="color:blue">int</span></span><span style="font-size:small"> </span><span style="font-size:small">aWidth</span><span style="font-size:small">, </span><span style="font-size:small"><span style="color:blue">int</span></span><span style="font-size:small"> </span><span style="font-size:small">aHeight</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:blue">void</span></span><span style="font-size:small"> </span><span style="font-size:small">keyCallback</span><span style="font-size:small">(</span><span style="font-size:small"><span style="color:blue">unsigned</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:blue">char</span></span><span style="font-size:small"> </span><span style="font-size:small">aKey</span><span style="font-size:small">, </span><span style="font-size:small"><span style="color:blue">int</span></span><span style="font-size:small"> </span><span style="font-size:small">aXPosition</span><span style="font-size:small">, </span><span style="font-size:small"><span style="color:blue">int</span></span><span style="font-size:small"> </span><span style="font-size:small">aYPosition</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:blue">void</span></span><span style="font-size:small"> </span><span style="font-size:small">scrollCallback</span><span style="font-size:small">(</span><span style="font-size:small"><span style="color:blue">int</span></span><span style="font-size:small"> </span><span style="font-size:small">aButton</span><span style="font-size:small">, </span><span style="font-size:small"><span style="color:blue">int</span></span><span style="font-size:small"> </span><span style="font-size:small">aState</span><span style="font-size:small">, </span><span style="font-size:small"><span style="color:blue">int</span></span><span style="font-size:small"> </span><span style="font-size:small">aXPosition</span><span style="font-size:small">, </span><span style="font-size:small"><span style="color:blue">int</span></span><span style="font-size:small"> </span><span style="font-size:small">aYPosition</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">//-----------------------------</span></span></span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:blue">int</span></span><span style="font-size:small"> </span><span style="font-size:small">main</span><span style="font-size:small">(</span><span style="font-size:small"><span style="color:blue">int</span></span><span style="font-size:small"> </span><span style="font-size:small">argc</span><span style="font-size:small">, </span><span style="font-size:small"><span style="color:blue">char</span></span><span style="font-size:small">** </span><span style="font-size:small">argv</span><span style="font-size:small">)</span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">//-----------------------------</span></span></span><span style="font-size:small">
</span><span style="font-size:small">{</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Return code</span></span></span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:blue">int</span></span><span style="font-size:small"> </span><span style="font-size:small">return_code</span><span style="font-size:small">(</span><span style="font-size:small">EXIT_SUCCESS</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Register the exit callback</span></span></span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small">atexit</span><span style="font-size:small">(</span><span style="font-size:small">quitCallback</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:blue">try</span></span><span style="font-size:small">
</span><span style="font-size:small">    {</span><span style="font-size:small">
</span><span style="font-size:small">        </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Initialise GLUT</span></span></span><span style="font-size:small">
</span><span style="font-size:small">        </span><span style="font-size:small">initGLUT</span><span style="font-size:small">(</span><span style="font-size:small">argc</span><span style="font-size:small">, </span><span style="font-size:small">argv</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">        </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Initialise GLEW</span></span></span><span style="font-size:small">
</span><span style="font-size:small">        </span><span style="font-size:small">initGLEW</span><span style="font-size:small">();</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">        </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Initialise OpenGL</span></span></span><span style="font-size:small">
</span><span style="font-size:small">        </span><span style="font-size:small">initGL</span><span style="font-size:small">();</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">        </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Give a text ID to the vertex and fragment shaders, it can be useful when debuging shaders</span></span></span><span style="font-size:small">
</span><span style="font-size:small">        </span><span style="font-size:small">g_display_shader</span><span style="font-size:small">.</span><span style="font-size:small">setLabels</span><span style="font-size:small">(</span><span style="font-size:small"><span style="color:#9300D1"><span style="font-size:small">"g_vertex_shader"</span></span></span><span style="font-size:small">, </span><span style="font-size:small"><span style="color:#9300D1"><span style="font-size:small">"g_fragment_shader"</span></span></span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">        </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Load the source code of the shaders onto the GPU</span></span></span><span style="font-size:small">
</span><span style="font-size:small">        </span><span style="font-size:small">g_display_shader</span><span style="font-size:small">.</span><span style="font-size:small">loadSource</span><span style="font-size:small">(</span><span style="font-size:small">g_vertex_shader</span><span style="font-size:small">, </span><span style="font-size:small">g_fragment_shader</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">        </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Initialise the geometry of the 3D objects</span></span></span><span style="font-size:small">
</span><span style="font-size:small">        </span><span style="font-size:small">load3DObjects</span><span style="font-size:small">();</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">        </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Set the projection matrix</span></span></span><span style="font-size:small">
</span><span style="font-size:small">        </span><span style="font-size:small">framebufferSizeCallback</span><span style="font-size:small">(</span><span style="font-size:small">g_window_width</span><span style="font-size:small">, </span><span style="font-size:small">g_window_height</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">        </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Launch the event loop</span></span></span><span style="font-size:small">
</span><span style="font-size:small">        </span><span style="font-size:small">glutMainLoop</span><span style="font-size:small">();</span><span style="font-size:small">
</span><span style="font-size:small">    }</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Catch exception if any</span></span></span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:blue">catch</span></span><span style="font-size:small"> (</span><span style="font-size:small"><span style="color:blue">const</span></span><span style="font-size:small"> </span><span style="font-size:small">exception</span><span style="font-size:small">&amp; </span><span style="font-size:small">error</span><span style="font-size:small">)</span><span style="font-size:small">
</span><span style="font-size:small">    {</span><span style="font-size:small">
</span><span style="font-size:small">        </span><span style="font-size:small">cerr</span><span style="font-size:small"> &lt;&lt; </span><span style="font-size:small">error</span><span style="font-size:small">.</span><span style="font-size:small">what</span><span style="font-size:small">() &lt;&lt; </span><span style="font-size:small">endl</span><span style="font-size:small">;</span><span style="font-size:small">
</span><span style="font-size:small">        </span><span style="font-size:small">return_code</span><span style="font-size:small"> = </span><span style="font-size:small">EXIT_FAILURE</span><span style="font-size:small">;</span><span style="font-size:small">
</span><span style="font-size:small">    }</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Close the window and shut GLFW if needed</span></span></span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small">quitCallback</span><span style="font-size:small">();</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Return an exit code</span></span></span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:blue">return</span></span><span style="font-size:small"> (</span><span style="font-size:small">return_code</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:small">}</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">//----------------------------------</span></span></span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:blue">void</span></span><span style="font-size:small"> </span><span style="font-size:small">initGLUT</span><span style="font-size:small">(</span><span style="font-size:small"><span style="color:blue">int</span></span><span style="font-size:small"> </span><span style="font-size:small">argc</span><span style="font-size:small">, </span><span style="font-size:small"><span style="color:blue">char</span></span><span style="font-size:small">** </span><span style="font-size:small">argv</span><span style="font-size:small">)</span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">//----------------------------------</span></span></span><span style="font-size:small">
</span><span style="font-size:small">{</span><span style="font-size:small">
</span><span style="font-size:small">  </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// GLUT initialisation</span></span></span><span style="font-size:small">
</span><span style="font-size:small">  </span><span style="font-size:small">glutInit</span><span style="font-size:small"> (&amp;</span><span style="font-size:small">argc</span><span style="font-size:small">, </span><span style="font-size:small">argv</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">  </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Create a windowed mode window and its OpenGL context</span></span></span><span style="font-size:small">
</span><span style="font-size:small">  </span><span style="font-size:small">glutInitWindowSize</span><span style="font-size:small">(</span><span style="font-size:small">g_window_width</span><span style="font-size:small">, </span><span style="font-size:small">g_window_height</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:small">  </span><span style="font-size:small">glutInitDisplayMode</span><span style="font-size:small"> ( </span><span style="font-size:small">GLUT_RGB</span><span style="font-size:small"> | </span><span style="font-size:small">GLUT_DOUBLE</span><span style="font-size:small"> | </span><span style="font-size:small">GLUT_DEPTH</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small">g_window_id</span><span style="font-size:small"> = </span><span style="font-size:small">glutCreateWindow</span><span style="font-size:small">(</span><span style="font-size:small"><span style="color:#9300D1"><span style="font-size:small">"gVirtualXRay -- Tutorial 01"</span></span></span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// The window has not been created</span></span></span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:blue">if</span></span><span style="font-size:small"> (!</span><span style="font-size:small">g_window_id</span><span style="font-size:small">)</span><span style="font-size:small">
</span><span style="font-size:small">    {</span><span style="font-size:small">
</span><span style="font-size:small">        </span><span style="font-size:small"><span style="color:blue">throw</span></span><span style="font-size:small"> </span><span style="font-size:small">Exception</span><span style="font-size:small">(</span><span style="font-size:small">__FILE__</span><span style="font-size:small">, </span><span style="font-size:small">__FUNCTION__</span><span style="font-size:small">, </span><span style="font-size:small">__LINE__</span><span style="font-size:small">,</span><span style="font-size:small">
</span><span style="font-size:small">                </span><span style="font-size:small"><span style="color:#9300D1"><span style="font-size:small">"ERROR: cannot create a GLUT windowed mode window and its OpenGL context."</span></span></span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:small">    }</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Register GLUT callbacks</span></span></span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small">glutDisplayFunc</span><span style="font-size:small">(</span><span style="font-size:small">displayCallback</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small">glutReshapeFunc</span><span style="font-size:small">(</span><span style="font-size:small">framebufferSizeCallback</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small">glutKeyboardFunc</span><span style="font-size:small">(</span><span style="font-size:small">keyCallback</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small">glutMouseFunc</span><span style="font-size:small">(</span><span style="font-size:small">scrollCallback</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small">glutIdleFunc</span><span style="font-size:small">(</span><span style="font-size:small">idleCallback</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:small">}</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">//-------------</span></span></span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:blue">void</span></span><span style="font-size:small"> </span><span style="font-size:small">initGLEW</span><span style="font-size:small">()</span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">//-------------</span></span></span><span style="font-size:small">
</span><span style="font-size:small">{</span><span style="font-size:small">
</span><span style="font-size:small">  </span><span style="font-size:small">GLenum</span><span style="font-size:small"> </span><span style="font-size:small">err</span><span style="font-size:small"> = </span><span style="font-size:small">glewInit</span><span style="font-size:small">();</span><span style="font-size:small">
</span><span style="font-size:small">  </span><span style="font-size:small"><span style="color:blue">if</span></span><span style="font-size:small"> (</span><span style="font-size:small">GLEW_OK</span><span style="font-size:small"> != </span><span style="font-size:small">err</span><span style="font-size:small">)</span><span style="font-size:small">
</span><span style="font-size:small">  {</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small">std</span><span style="font-size:small">::</span><span style="font-size:small">stringstream</span><span style="font-size:small"> </span><span style="font-size:small">error_message</span><span style="font-size:small">;</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small">error_message</span><span style="font-size:small"> &lt;&lt; </span><span style="font-size:small"><span style="color:#9300D1"><span style="font-size:small">"ERROR: cannot initialise GLEW:\t"</span></span></span><span style="font-size:small"> &lt;&lt; </span><span style="font-size:small">glewGetErrorString</span><span style="font-size:small">(</span><span style="font-size:small">err</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">        </span><span style="font-size:small"><span style="color:blue">throw</span></span><span style="font-size:small"> </span><span style="font-size:small">Exception</span><span style="font-size:small">(</span><span style="font-size:small">__FILE__</span><span style="font-size:small">, </span><span style="font-size:small">__FUNCTION__</span><span style="font-size:small">, </span><span style="font-size:small">__LINE__</span><span style="font-size:small">, </span><span style="font-size:small">error_message</span><span style="font-size:small">.</span><span style="font-size:small">str</span><span style="font-size:small">());</span><span style="font-size:small">
</span><span style="font-size:small">  }</span><span style="font-size:small">
</span><span style="font-size:small">}</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">//-----------</span></span></span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:blue">void</span></span><span style="font-size:small"> </span><span style="font-size:small">initGL</span><span style="font-size:small">()</span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">//-----------</span></span></span><span style="font-size:small">
</span><span style="font-size:small">{</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Enable the Z-buffer</span></span></span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small">glEnable</span><span style="font-size:small">(</span><span style="font-size:small">GL_DEPTH_TEST</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Set the background colour</span></span></span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small">glClearColor</span><span style="font-size:small">(0.5, 0.5, 0.5, 1.0);</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Check if any OpenGL error has occurred.</span></span></span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// If any has, an exception is thrown</span></span></span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small">checkOpenGLErrorStatus</span><span style="font-size:small">(</span><span style="font-size:small">__FILE__</span><span style="font-size:small">, </span><span style="font-size:small">__FUNCTION__</span><span style="font-size:small">, </span><span style="font-size:small">__LINE__</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:small">}</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">//------------------</span></span></span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:blue">void</span></span><span style="font-size:small"> </span><span style="font-size:small">load3DObjects</span><span style="font-size:small">()</span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">//------------------</span></span></span><span style="font-size:small">
</span><span style="font-size:small">{</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Centre of the cubes</span></span></span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small">VEC3</span><span style="font-size:small"> </span><span style="font-size:small">cube_centre</span><span style="font-size:small">(0, 0, 0);</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Size of the cubes</span></span></span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small">RATIONAL_NUMBER</span><span style="font-size:small"> </span><span style="font-size:small">length_1</span><span style="font-size:small">( 5.0 * </span><span style="font-size:small">cm</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small">RATIONAL_NUMBER</span><span style="font-size:small"> </span><span style="font-size:small">length_2</span><span style="font-size:small">(10.0 * </span><span style="font-size:small">cm</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Create the cube using vertex data and index data</span></span></span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small">buildCube</span><span style="font-size:small">(</span><span style="font-size:small">length_1</span><span style="font-size:small">, </span><span style="font-size:small">cube_centre</span><span style="font-size:small">, </span><span style="font-size:small">g_p_vertex_set_1</span><span style="font-size:small">, </span><span style="font-size:small">g_p_index_set_1</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Create the cube using vertex data only</span></span></span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small">buildCube</span><span style="font-size:small">(</span><span style="font-size:small">length_2</span><span style="font-size:small">, </span><span style="font-size:small">cube_centre</span><span style="font-size:small">, </span><span style="font-size:small">g_p_vertex_set_2</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Set geometry (using VAOs and VBOs)</span></span></span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small">g_polygon_mesh_1</span><span style="font-size:small">.</span><span style="font-size:small">setExternalData</span><span style="font-size:small">(</span><span style="font-size:small">GL_TRIANGLES</span><span style="font-size:small">,</span><span style="font-size:small">
</span><span style="font-size:small">            &amp;</span><span style="font-size:small">g_p_vertex_set_1</span><span style="font-size:small">,</span><span style="font-size:small">
</span><span style="font-size:small">            &amp;</span><span style="font-size:small">g_p_index_set_1</span><span style="font-size:small">,</span><span style="font-size:small">
</span><span style="font-size:small">            </span><span style="font-size:small"><span style="color:blue">true</span></span><span style="font-size:small">,</span><span style="font-size:small">
</span><span style="font-size:small">            </span><span style="font-size:small">GL_STATIC_DRAW</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small">g_polygon_mesh_2</span><span style="font-size:small">.</span><span style="font-size:small">setExternalData</span><span style="font-size:small">(</span><span style="font-size:small">GL_TRIANGLES</span><span style="font-size:small">,</span><span style="font-size:small">
</span><span style="font-size:small">            &amp;</span><span style="font-size:small">g_p_vertex_set_2</span><span style="font-size:small">,</span><span style="font-size:small">
</span><span style="font-size:small">            </span><span style="font-size:small"><span style="color:blue">true</span></span><span style="font-size:small">,</span><span style="font-size:small">
</span><span style="font-size:small">            </span><span style="font-size:small">GL_STATIC_DRAW</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:small">}</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">//--------------------</span></span></span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:blue">void</span></span><span style="font-size:small"> </span><span style="font-size:small">displayCallback</span><span style="font-size:small">()</span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">//--------------------</span></span></span><span style="font-size:small">
</span><span style="font-size:small">{</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Clear the buffers</span></span></span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small">glClear</span><span style="font-size:small">(</span><span style="font-size:small">GL_COLOR_BUFFER_BIT</span><span style="font-size:small"> | </span><span style="font-size:small">GL_DEPTH_BUFFER_BIT</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Add the current shader to the shader stack</span></span></span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small">pushShaderProgram</span><span style="font-size:small">();</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Enable the shader</span></span></span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small">g_display_shader</span><span style="font-size:small">.</span><span style="font-size:small">enable</span><span style="font-size:small">();</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small">GLint</span><span style="font-size:small"> </span><span style="font-size:small">shader_id</span><span style="font-size:small">(</span><span style="font-size:small">g_display_shader</span><span style="font-size:small">.</span><span style="font-size:small">getProgramHandle</span><span style="font-size:small">());</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Check the status of OpenGL and of the current FBO</span></span></span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small">checkFBOErrorStatus</span><span style="font-size:small">(</span><span style="font-size:small">__FILE__</span><span style="font-size:small">, </span><span style="font-size:small">__FUNCTION__</span><span style="font-size:small">, </span><span style="font-size:small">__LINE__</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small">checkOpenGLErrorStatus</span><span style="font-size:small">(</span><span style="font-size:small">__FILE__</span><span style="font-size:small">, </span><span style="font-size:small">__FUNCTION__</span><span style="font-size:small">, </span><span style="font-size:small">__LINE__</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// A handle for shader resources</span></span></span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small">GLuint</span><span style="font-size:small"> </span><span style="font-size:small">handle</span><span style="font-size:small">(0);</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Upload the projection matrix</span></span></span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small">handle</span><span style="font-size:small"> = </span><span style="font-size:small">glGetUniformLocation</span><span style="font-size:small">(</span><span style="font-size:small">shader_id</span><span style="font-size:small">, </span><span style="font-size:small"><span style="color:#9300D1"><span style="font-size:small">"g_projection_matrix"</span></span></span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small">glUniformMatrix4fv</span><span style="font-size:small">(</span><span style="font-size:small">handle</span><span style="font-size:small">, 1, </span><span style="font-size:small">GL_FALSE</span><span style="font-size:small">, </span><span style="font-size:small">g_current_projection_matrix</span><span style="font-size:small">.</span><span style="font-size:small">get</span><span style="font-size:small">());</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small">checkOpenGLErrorStatus</span><span style="font-size:small">(</span><span style="font-size:small">__FILE__</span><span style="font-size:small">, </span><span style="font-size:small">__FUNCTION__</span><span style="font-size:small">, </span><span style="font-size:small">__LINE__</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Upload the modelview matrix</span></span></span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small">handle</span><span style="font-size:small"> = </span><span style="font-size:small">glGetUniformLocation</span><span style="font-size:small">(</span><span style="font-size:small">shader_id</span><span style="font-size:small">, </span><span style="font-size:small"><span style="color:#9300D1"><span style="font-size:small">"g_modelview_matrix"</span></span></span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small">glUniformMatrix4fv</span><span style="font-size:small">(</span><span style="font-size:small">handle</span><span style="font-size:small">, 1, </span><span style="font-size:small">GL_FALSE</span><span style="font-size:small">, </span><span style="font-size:small">g_current_modelview_matrix</span><span style="font-size:small">.</span><span style="font-size:small">get</span><span style="font-size:small">());</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small">checkOpenGLErrorStatus</span><span style="font-size:small">(</span><span style="font-size:small">__FILE__</span><span style="font-size:small">, </span><span style="font-size:small">__FUNCTION__</span><span style="font-size:small">, </span><span style="font-size:small">__LINE__</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Store the current transformation matrices</span></span></span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small">pushModelViewMatrix</span><span style="font-size:small">();</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small">pushProjectionMatrix</span><span style="font-size:small">();</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Translate the 1st object</span></span></span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small">g_current_modelview_matrix</span><span style="font-size:small"> *= </span><span style="font-size:small">MATRIX4</span><span style="font-size:small">::</span><span style="font-size:small">buildTranslationMatrix</span><span style="font-size:small">(</span><span style="font-size:small">
</span><span style="font-size:small">            </span><span style="font-size:small">VEC3</span><span style="font-size:small">(8.0 * </span><span style="font-size:small">cm</span><span style="font-size:small">, 0.0, 0.0));</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Rotate the 1st object</span></span></span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small">g_current_modelview_matrix</span><span style="font-size:small"> *= </span><span style="font-size:small">g_object_1_rotation_matrix</span><span style="font-size:small">;</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Apply the change to the shader program</span></span></span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small">applyModelViewMatrix</span><span style="font-size:small">();</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Display the 1st object</span></span></span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small">g_polygon_mesh_1</span><span style="font-size:small">.</span><span style="font-size:small">display</span><span style="font-size:small">();</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Restore the current transformation matrix</span></span></span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small">popModelViewMatrix</span><span style="font-size:small">();</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small">popProjectionMatrix</span><span style="font-size:small">();</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Store the current transformation matrices</span></span></span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small">pushModelViewMatrix</span><span style="font-size:small">();</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small">pushProjectionMatrix</span><span style="font-size:small">();</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Translate the 2nd object</span></span></span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small">g_current_modelview_matrix</span><span style="font-size:small"> *= </span><span style="font-size:small">MATRIX4</span><span style="font-size:small">::</span><span style="font-size:small">buildTranslationMatrix</span><span style="font-size:small">(</span><span style="font-size:small">
</span><span style="font-size:small">            </span><span style="font-size:small">VEC3</span><span style="font-size:small">(-8.0 * </span><span style="font-size:small">cm</span><span style="font-size:small">, 0.0, 0.0));</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Rotate the 2nd object</span></span></span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small">g_current_modelview_matrix</span><span style="font-size:small"> *= </span><span style="font-size:small">g_object_2_rotation_matrix</span><span style="font-size:small">;</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Apply the change to the shader program</span></span></span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small">applyModelViewMatrix</span><span style="font-size:small">();</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Display the 2nd object</span></span></span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small">g_polygon_mesh_2</span><span style="font-size:small">.</span><span style="font-size:small">display</span><span style="font-size:small">();</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Restore the current transformation matrix</span></span></span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small">popModelViewMatrix</span><span style="font-size:small">();</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small">popProjectionMatrix</span><span style="font-size:small">();</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Disable the shader and restore the previous shader from the stack</span></span></span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small">popShaderProgram</span><span style="font-size:small">();</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Check the status of OpenGL and of the current FBO</span></span></span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small">checkFBOErrorStatus</span><span style="font-size:small">(</span><span style="font-size:small">__FILE__</span><span style="font-size:small">, </span><span style="font-size:small">__FUNCTION__</span><span style="font-size:small">, </span><span style="font-size:small">__LINE__</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small">checkOpenGLErrorStatus</span><span style="font-size:small">(</span><span style="font-size:small">__FILE__</span><span style="font-size:small">, </span><span style="font-size:small">__FUNCTION__</span><span style="font-size:small">, </span><span style="font-size:small">__LINE__</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Swap front and back buffers</span></span></span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small">glutSwapBuffers</span><span style="font-size:small">();</span><span style="font-size:small">
</span><span style="font-size:small">}</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">//-----------------</span></span></span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:blue">void</span></span><span style="font-size:small"> </span><span style="font-size:small">idleCallback</span><span style="font-size:small">()</span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">//-----------------</span></span></span><span style="font-size:small">
</span><span style="font-size:small">{</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Rotate the objects</span></span></span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small">g_object_1_rotation_matrix</span><span style="font-size:small">.</span><span style="font-size:small">rotate</span><span style="font-size:small">(1.0, </span><span style="font-size:small">VEC3</span><span style="font-size:small">(1.0, 0.0, 0.0));</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small">g_object_2_rotation_matrix</span><span style="font-size:small">.</span><span style="font-size:small">rotate</span><span style="font-size:small">(2.0, </span><span style="font-size:small">VEC3</span><span style="font-size:small">(0.0, 1.0, 0.0));</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">  </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Redisplay the scene</span></span></span><span style="font-size:small">
</span><span style="font-size:small">  </span><span style="font-size:small">glutPostRedisplay</span><span style="font-size:small">();</span><span style="font-size:small">
</span><span style="font-size:small">}</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">//-----------------</span></span></span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:blue">void</span></span><span style="font-size:small"> </span><span style="font-size:small">quitCallback</span><span style="font-size:small">()</span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">//-----------------</span></span></span><span style="font-size:small">
</span><span style="font-size:small">{</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// The window exists</span></span></span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:blue">if</span></span><span style="font-size:small"> (</span><span style="font-size:small">g_window_id</span><span style="font-size:small">)</span><span style="font-size:small">
</span><span style="font-size:small">    {</span><span style="font-size:small">
</span><span style="font-size:small">        </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Close the window</span></span></span><span style="font-size:small">
</span><span style="font-size:small">        </span><span style="font-size:small">glutDestroyWindow</span><span style="font-size:small">(</span><span style="font-size:small">g_window_id</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:small">        </span><span style="font-size:small">g_window_id</span><span style="font-size:small"> = 0;</span><span style="font-size:small">
</span><span style="font-size:small">    }</span><span style="font-size:small">
</span><span style="font-size:small">}</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">//-------------------------------------------------</span></span></span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:blue">void</span></span><span style="font-size:small"> </span><span style="font-size:small">framebufferSizeCallback</span><span style="font-size:small">(</span><span style="font-size:small"><span style="color:blue">int</span></span><span style="font-size:small"> </span><span style="font-size:small">width</span><span style="font-size:small">, </span><span style="font-size:small"><span style="color:blue">int</span></span><span style="font-size:small"> </span><span style="font-size:small">height</span><span style="font-size:small">)</span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">//-------------------------------------------------</span></span></span><span style="font-size:small">
</span><span style="font-size:small">{</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Avoid a division by zero</span></span></span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:blue">if</span></span><span style="font-size:small"> (</span><span style="font-size:small">height</span><span style="font-size:small"> == 0)</span><span style="font-size:small">
</span><span style="font-size:small">    {</span><span style="font-size:small">
</span><span style="font-size:small">        </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Prevent divide by 0</span></span></span><span style="font-size:small">
</span><span style="font-size:small">        </span><span style="font-size:small">height</span><span style="font-size:small"> = 1;</span><span style="font-size:small">
</span><span style="font-size:small">    }</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:blue">int</span></span><span style="font-size:small"> </span><span style="font-size:small">x</span><span style="font-size:small">(0), </span><span style="font-size:small">y</span><span style="font-size:small">(0), </span><span style="font-size:small">w</span><span style="font-size:small">(</span><span style="font-size:small">width</span><span style="font-size:small">), </span><span style="font-size:small">h</span><span style="font-size:small">(</span><span style="font-size:small">height</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Store the width and height of the window</span></span></span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small">g_window_width</span><span style="font-size:small"> = </span><span style="font-size:small">width</span><span style="font-size:small">;</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small">g_window_height</span><span style="font-size:small"> = </span><span style="font-size:small">height</span><span style="font-size:small">;</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Compute the aspect ratio of the size of the window</span></span></span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:blue">double</span></span><span style="font-size:small"> </span><span style="font-size:small">screen_aspect_ratio</span><span style="font-size:small">(</span><span style="font-size:small"><span style="color:blue">double</span></span><span style="font-size:small">(</span><span style="font-size:small">g_window_width</span><span style="font-size:small">) / </span><span style="font-size:small"><span style="color:blue">double</span></span><span style="font-size:small">(</span><span style="font-size:small">g_window_height</span><span style="font-size:small">));</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Update the viewport</span></span></span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small">glViewport</span><span style="font-size:small">(</span><span style="font-size:small">x</span><span style="font-size:small">, </span><span style="font-size:small">y</span><span style="font-size:small">, </span><span style="font-size:small">w</span><span style="font-size:small">, </span><span style="font-size:small">h</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Set up the projection matrix (g_current_projection_matrix)</span></span></span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small">loadPerspectiveProjectionMatrix</span><span style="font-size:small">(45.0, </span><span style="font-size:small">screen_aspect_ratio</span><span style="font-size:small">, 0.1 * </span><span style="font-size:small">cm</span><span style="font-size:small">, 5000.0 * </span><span style="font-size:small">cm</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Set up the modelling-viewing matrix (g_current_modelview_matrix)</span></span></span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small">loadLookAtModelViewMatrix</span><span style="font-size:small">(50.0 * </span><span style="font-size:small">cm</span><span style="font-size:small">, 50.0 * </span><span style="font-size:small">cm</span><span style="font-size:small">, </span><span style="font-size:small">g_zoom</span><span style="font-size:small">,</span><span style="font-size:small">
</span><span style="font-size:small">            0.0, 0.0, 0.0,</span><span style="font-size:small">
</span><span style="font-size:small">            0.0, 1.0, 0.0);</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">  </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Redisplay the scene</span></span></span><span style="font-size:small">
</span><span style="font-size:small">  </span><span style="font-size:small">glutPostRedisplay</span><span style="font-size:small">();</span><span style="font-size:small">
</span><span style="font-size:small">}</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">//------------------------------------------------------------------</span></span></span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:blue">void</span></span><span style="font-size:small"> </span><span style="font-size:small">keyCallback</span><span style="font-size:small">(</span><span style="font-size:small"><span style="color:blue">unsigned</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:blue">char</span></span><span style="font-size:small"> </span><span style="font-size:small">aKey</span><span style="font-size:small">, </span><span style="font-size:small"><span style="color:blue">int</span></span><span style="font-size:small"> </span><span style="font-size:small">aXPosition</span><span style="font-size:small">, </span><span style="font-size:small"><span style="color:blue">int</span></span><span style="font-size:small"> </span><span style="font-size:small">aYPosition</span><span style="font-size:small">)</span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">//------------------------------------------------------------------</span></span></span><span style="font-size:small">
</span><span style="font-size:small">{</span><span style="font-size:small">
</span><span style="font-size:small">  </span><span style="font-size:small"><span style="color:blue">switch</span></span><span style="font-size:small">(</span><span style="font-size:small">aKey</span><span style="font-size:small">)</span><span style="font-size:small">
</span><span style="font-size:small">  {</span><span style="font-size:small">
</span><span style="font-size:small">  </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Close the program</span></span></span><span style="font-size:small">
</span><span style="font-size:small">  </span><span style="font-size:small"><span style="color:blue">case</span></span><span style="font-size:small"> 27:</span><span style="font-size:small">
</span><span style="font-size:small">  </span><span style="font-size:small"><span style="color:blue">case</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:#9300D1"><span style="font-size:small">'q'</span></span></span><span style="font-size:small">:</span><span style="font-size:small">
</span><span style="font-size:small">        </span><span style="font-size:small">quitCallback</span><span style="font-size:small">();</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small">exit</span><span style="font-size:small">(</span><span style="font-size:small">EXIT_SUCCESS</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:blue">break</span></span><span style="font-size:small">;</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">  </span><span style="font-size:small"><span style="color:blue">default</span></span><span style="font-size:small">:</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:blue">break</span></span><span style="font-size:small">;</span><span style="font-size:small">
</span><span style="font-size:small">  }</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">  </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Redisplay the scene</span></span></span><span style="font-size:small">
</span><span style="font-size:small">  </span><span style="font-size:small">glutPostRedisplay</span><span style="font-size:small">();</span><span style="font-size:small">
</span><span style="font-size:small">}</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">//--------------------------------------------------------------------------</span></span></span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:blue">void</span></span><span style="font-size:small"> </span><span style="font-size:small">scrollCallback</span><span style="font-size:small">(</span><span style="font-size:small"><span style="color:blue">int</span></span><span style="font-size:small"> </span><span style="font-size:small">aButton</span><span style="font-size:small">, </span><span style="font-size:small"><span style="color:blue">int</span></span><span style="font-size:small"> </span><span style="font-size:small">aState</span><span style="font-size:small">, </span><span style="font-size:small"><span style="color:blue">int</span></span><span style="font-size:small"> </span><span style="font-size:small">aXPosition</span><span style="font-size:small">, </span><span style="font-size:small"><span style="color:blue">int</span></span><span style="font-size:small"> </span><span style="font-size:small">aYPosition</span><span style="font-size:small">)</span><span style="font-size:small">
</span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">//--------------------------------------------------------------------------</span></span></span><span style="font-size:small">
</span><span style="font-size:small">{</span><span style="font-size:small">
</span><span style="font-size:small">  </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// The button is down</span></span></span><span style="font-size:small">
</span><span style="font-size:small">  </span><span style="font-size:small"><span style="color:blue">if</span></span><span style="font-size:small"> (</span><span style="font-size:small">aState</span><span style="font-size:small"> == </span><span style="font-size:small">GLUT_DOWN</span><span style="font-size:small">)</span><span style="font-size:small">
</span><span style="font-size:small">  {</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// This is a wheel event</span></span></span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:blue">if</span></span><span style="font-size:small"> (</span><span style="font-size:small">aButton</span><span style="font-size:small"> == 3)</span><span style="font-size:small">
</span><span style="font-size:small">    {</span><span style="font-size:small">
</span><span style="font-size:small">          </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Change the zoom</span></span></span><span style="font-size:small">
</span><span style="font-size:small">          </span><span style="font-size:small">g_zoom</span><span style="font-size:small"> += 5 * </span><span style="font-size:small">cm</span><span style="font-size:small">;</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">          </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Update the projection matrix</span></span></span><span style="font-size:small">
</span><span style="font-size:small">          </span><span style="font-size:small">framebufferSizeCallback</span><span style="font-size:small">(</span><span style="font-size:small">g_window_width</span><span style="font-size:small">, </span><span style="font-size:small">g_window_height</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:small">    }</span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// This is a wheel event</span></span></span><span style="font-size:small">
</span><span style="font-size:small">    </span><span style="font-size:small"><span style="color:blue">else</span></span><span style="font-size:small"> </span><span style="font-size:small"><span style="color:blue">if</span></span><span style="font-size:small"> (</span><span style="font-size:small">aButton</span><span style="font-size:small"> == 4)</span><span style="font-size:small">
</span><span style="font-size:small">    {</span><span style="font-size:small">
</span><span style="font-size:small">      </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Change the zoom</span></span></span><span style="font-size:small">
</span><span style="font-size:small">      </span><span style="font-size:small">g_zoom</span><span style="font-size:small"> -= 5 * </span><span style="font-size:small">cm</span><span style="font-size:small">;</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">      </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Update the projection matrix</span></span></span><span style="font-size:small">
</span><span style="font-size:small">      </span><span style="font-size:small">framebufferSizeCallback</span><span style="font-size:small">(</span><span style="font-size:small">g_window_width</span><span style="font-size:small">, </span><span style="font-size:small">g_window_height</span><span style="font-size:small">);</span><span style="font-size:small">
</span><span style="font-size:small">    }</span><span style="font-size:small">
</span><span style="font-size:small">  }</span><span style="font-size:small">
</span><span style="font-size:small">
</span><span style="font-size:small">  </span><span style="font-size:small"><span style="color:#009900"><span style="font-size:small">// Redisplay the scene</span></span></span><span style="font-size:small">
</span><span style="font-size:small">  </span><span style="font-size:small">glutPostRedisplay</span><span style="font-size:small">();</span><span style="font-size:small">
</span><span style="font-size:small">}</span></td></tr>
</table>
</div><!--BEGIN NOTES document-->
<hr class="footnoterule"><dl class="thefootnotes"><dt class="dt-thefootnotes">
<a id="note1" href="#text1">1</a></dt><dd class="dd-thefootnotes"><div class="footnotetext"><a href="http://www.pengl.org/resources/libraries/glut//"><span style="font-family:monospace">http://www.pengl.org/resources/libraries/glut//</span></a></div></dd><dt class="dt-thefootnotes"><a id="note2" href="#text2">2</a></dt><dd class="dd-thefootnotes"><div class="footnotetext"><a href="http://www.doxygen.org/"><span style="font-family:monospace">http://www.doxygen.org/</span></a></div></dd><dt class="dt-thefootnotes"><a id="note3" href="#text3">3</a></dt><dd class="dd-thefootnotes"><div class="footnotetext"><a href="http://gvirtualxray.sourceforge.net/documentation.php"><span style="font-family:monospace">http://gvirtualxray.sourceforge.net/documentation.php</span></a></div></dd><dt class="dt-thefootnotes"><a id="note4" href="#text4">4</a></dt><dd class="dd-thefootnotes"><div class="footnotetext"><a href="http://glew.sourceforge.net/"><span style="font-family:monospace">http://glew.sourceforge.net/</span></a></div></dd><dt class="dt-thefootnotes"><a id="note5" href="#text5">5</a></dt><dd class="dd-thefootnotes"><div class="footnotetext"><a href="http://www.zlib.net/"><span style="font-family:monospace">http://www.zlib.net/</span></a></div></dd></dl>
<!--END NOTES-->
<!--CUT END -->
<!--HTMLFOOT-->
<!--ENDHTML-->
<!--FOOTER-->
<hr style="height:2"><blockquote class="quote"><em>This document was translated from L<sup>A</sup>T<sub>E</sub>X by
</em><a href="http://hevea.inria.fr/index.html"><em>H</em><em><span style="font-size:small"><sup>E</sup></span></em><em>V</em><em><span style="font-size:small"><sup>E</sup></span></em><em>A</em></a><em>.</em></blockquote></body>
</html>
